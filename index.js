var Mi=(i,o)=>()=>(i&&(o=i(i=0)),o);var fi={};var zi,ti,Pi,si,$,ii,oi,mi,Ei,_i=async()=>{if(["#main-header","#main-content","#control-panel","#demo-area"].filter((d)=>!document.querySelector(d)).length>0);let m=document.createElement("div");document.body.appendChild(m);let E=getComputedStyle(m),L=["--primary1-background-color-default","--color-system-01","--font-family"].filter((d)=>!E.getPropertyValue(d));if(document.body.removeChild(m),L.length>0);try{ii.init(),oi.init(),mi.init(),Ei.init(),await $.init()}catch(d){throw d}let M=!1;window.addEventListener("resize",()=>{if(M)return;M=!0,requestAnimationFrame(()=>{$.StyleManager.applyDynamicStyles(),M=!1})}),document.addEventListener("click",(d)=>{let _=d.target?.closest?.(".button");if(!_||_.getAttribute("aria-disabled")==="true"||_.dataset.isToggleButton!=="true")return;let A=_.classList.contains("pressed"),s=_.querySelector(".content.icon.pressed");if(A){if(s)s.style.display="none";requestAnimationFrame(()=>{if(_.classList.remove("pressed"),_.setAttribute("aria-pressed","false"),s)s.style.removeProperty("display")})}else{if(s)s.style.removeProperty("display");_.classList.add("pressed"),_.setAttribute("aria-pressed","true"),$.StyleManager.scheduleContrastUpdate()}},!1);let O=(d)=>{if(d.target?.closest?.('.button[aria-disabled="true"]')){if(d.preventDefault(),d.stopPropagation(),typeof d.stopImmediatePropagation==="function")d.stopImmediatePropagation();return!0}return!1};document.addEventListener("click",O,!0),document.addEventListener("keydown",(d)=>{if(d.target?.closest?.('.button[aria-disabled="true"]')&&(d.key===" "||d.key==="Enter"||d.key==="NumpadEnter")){d.preventDefault(),d.stopPropagation();return}let A=d.target?.closest?.(".button");if(A&&A.getAttribute("aria-disabled")!=="true"){if(d.key==="Enter"||d.key==="NumpadEnter"||d.key===" ")if(d.preventDefault(),d.stopPropagation(),A.classList.contains("toggle")){let f=new MouseEvent("click",{bubbles:!0,cancelable:!0,button:0});A.dispatchEvent(f)}else A.classList.add("pressed"),setTimeout(()=>{A.classList.remove("pressed");let f=new MouseEvent("click",{bubbles:!0,cancelable:!0,button:0});A.dispatchEvent(f)},100)}},!0),document.addEventListener("keydown",(d)=>{let _=document.activeElement,A=["ArrowDown","ArrowUp","ArrowRight","ArrowLeft","Home","End"].includes(d.key);if((!_||!_.classList.contains("button"))&&A){d.preventDefault();let h=document.querySelector(".button");if(h)h.focus();return}if(!_||!_.classList.contains("button"))return;let s=null,f=Array.from(document.querySelectorAll(".button")).filter((h)=>h.offsetParent!==null);switch(d.key){case"ArrowRight":d.preventDefault();let l=(f.indexOf(_)+1)%f.length;s=f[l];break;case"ArrowLeft":d.preventDefault();let R=f.indexOf(_),D=R===0?f.length-1:R-1;s=f[D];break;case"ArrowDown":d.preventDefault();let C=_.closest(".showcase"),N=f.indexOf(_);for(let w=1;w<f.length;w++){let U=(N+w)%f.length,G=f[U];if(G.closest(".showcase")!==C){s=G;break}}break;case"ArrowUp":d.preventDefault();let F=_.closest(".showcase"),B=f.indexOf(_);for(let w=1;w<f.length;w++){let U=(B-w+f.length)%f.length,y=f[U].closest(".showcase");if(y!==F){s=f.filter((S)=>S.closest(".showcase")===y)[0];break}}break;case"Home":d.preventDefault(),s=f[0];break;case"End":d.preventDefault(),s=f[f.length-1];break}if(s)s.focus()},!0),document.addEventListener("mousedown",(d)=>{let _=d.target?.closest?.(".button");if(_&&_.getAttribute("aria-disabled")!=="true"&&!_.classList.contains("toggle"))_.classList.add("pressed")},!0),document.addEventListener("mouseup",(d)=>{let _=d.target?.closest?.(".button");if(_&&_.classList.contains("pressed")&&!_.classList.contains("toggle"))_.classList.remove("pressed"),$.StyleManager.scheduleContrastUpdate()},!0),document.addEventListener("mouseleave",(d)=>{if(d.target&&typeof d.target.closest==="function"){let _=d.target?.closest?.(".button");if(_&&_.classList.contains("pressed")&&!_.classList.contains("toggle"))_.classList.remove("pressed"),$.StyleManager.scheduleUpdate()}},!0),document.addEventListener("touchstart",(d)=>{let _=d.target?.closest?.(".button");if(_&&_.getAttribute("aria-disabled")!=="true"&&!_.classList.contains("toggle"))_.classList.add("pressed")},{passive:!0}),document.addEventListener("touchend",(d)=>{let _=d.target?.closest?.(".button");if(_&&_.classList.contains("pressed")&&!_.classList.contains("toggle"))_.classList.remove("pressed"),$.StyleManager.scheduleContrastUpdate()},{passive:!0}),document.addEventListener("touchcancel",(d)=>{let _=d.target?.closest?.(".button");if(_&&_.classList.contains("pressed")&&!_.classList.contains("toggle"))_.classList.remove("pressed"),$.StyleManager.scheduleContrastUpdate()},{passive:!0}),window.AppUtils=si,window.ButtonSystem=$,window.ThemeManager=ii,window.LargeTextManager=oi,window.SizeControlManager=mi,window.CustomPaletteManager=Ei};var di=Mi(()=>{({ColorConverter:zi,Topology:ti,Mechanics:Pi,AppUtils:si,ButtonSystem:$,ThemeManager:ii,LargeTextManager:oi,SizeControlManager:mi,CustomPaletteManager:Ei}=window);if(document.readyState==="loading")window.addEventListener("DOMContentLoaded",_i);else _i()});var b={rgbaToHex(i,o,m,E=255){return chroma.rgb(i,o,m).alpha(E/255).hex("rgba").toUpperCase()},rgba(i,o,m,E=255){return{r:i,g:o,b:m,a:E}},hexToRgba(i){let o=chroma(i),m=o.rgb();return{r:m[0],g:m[1],b:m[2],a:Math.round(o.alpha()*255)}},hsvToRgb(i,o,m){let E=chroma.hsv(i,o,m).rgb();return{r:E[0],g:E[1],b:E[2]}},hsvToHex(i,o,m,E=255){return chroma.hsv(i,o,m).alpha(E/255).hex("rgba").toUpperCase()},rgbToHsl(i,o,m){let E=chroma.rgb(i,o,m).hsl();return{h:Math.round(E[0]||0),s:Math.round(E[1]*100),l:Math.round(E[2]*100)}},hslToRgb(i,o,m){let E=chroma.hsl(i,o,m).rgb();return{r:E[0],g:E[1],b:E[2]}},hslToHex(i,o,m,E=255){return chroma.hsl(i,o,m).alpha(E/255).hex("rgba").toUpperCase()}};var W={COORDINATE_SYSTEM:{SPHERICAL:{NORTH_POLE:{theta:0,phi:0},SOUTH_POLE:{theta:Math.PI,phi:0},EQUATOR:{theta:Math.PI/2,phi:0}},CARTESIAN:{ORIGIN:{x:0,y:0,z:0},NORTH_POLE:{x:0,y:0,z:1},SOUTH_POLE:{x:0,y:0,z:-1}},POLAR_COLORS:{NORTH_POLE:{r:255,g:255,b:255},SOUTH_POLE:{r:0,g:0,b:0}},SCREEN:{CENTER:{x:0,y:0},UNIT_RADIUS:1}},calculateColor(i,o){let m=(o+Math.PI)/(2*Math.PI)*360,E=Math.floor(m/60)%6,T=m%60/60,L=()=>{switch(E){case 0:return{r:255,g:Math.round(T*255),b:0};case 1:return{r:Math.round((1-T)*255),g:255,b:0};case 2:return{r:0,g:255,b:Math.round(T*255)};case 3:return{r:0,g:Math.round((1-T)*255),b:255};case 4:return{r:Math.round(T*255),g:0,b:255};case 5:return{r:255,g:0,b:Math.round((1-T)*255)}}},M=i*180/Math.PI,O=M<90?1-(M-3)/84*0.5:0.5-(M-93)/84*0.5,{r:d,g:_,b:A}=L(),s=Math.sin(i),f=Math.round(O*255);return{r:Math.round(f+(d-f)*s),g:Math.round(f+(_-f)*s),b:Math.round(f+(A-f)*s)}},calculateColor2(i,o){let m=i*180/Math.PI,E=m<3||m>177,T=Math.abs(m-90)<3;if(E)return m<3?this.COORDINATE_SYSTEM.POLAR_COLORS.NORTH_POLE:this.COORDINATE_SYSTEM.POLAR_COLORS.SOUTH_POLE;let L=(o+Math.PI)/(2*Math.PI)*360,M=Math.floor(L/60)%6,O=L%60/60,d=()=>{switch(M){case 0:return{r:255,g:Math.round(O*255),b:0};case 1:return{r:Math.round((1-O)*255),g:255,b:0};case 2:return{r:0,g:255,b:Math.round(O*255)};case 3:return{r:0,g:Math.round((1-O)*255),b:255};case 4:return{r:Math.round(O*255),g:0,b:255};case 5:return{r:255,g:0,b:Math.round((1-O)*255)}}};if(T)return d();let _=m<90?1-(m-3)/84*0.5:0.5-(m-93)/84*0.5,{r:A,g:s,b:f}=d(),h=Math.sin(i),l=Math.round(_*255);return{r:Math.round(l+(A-l)*h),g:Math.round(l+(s-l)*h),b:Math.round(l+(f-l)*h)}}};var g={setupZoomSlider(i,o){let m=document.getElementById("zoom-slider"),E=document.querySelector(".zoom-value");if(!m||!E)return;m.addEventListener("input",(T)=>{i.zoom=parseFloat(T.target.value),window.Mechanics.RenderColorSphere(o.getContext("2d"),i),E.textContent=`${Math.round(i.zoom*100)}%`}),m.value=i.zoom,E.textContent=`${Math.round(i.zoom*100)}%`},setupColorInfoUpdate(i,o){let m=document.querySelector(".color-hex"),E=document.querySelector(".color-rgb"),T=document.querySelector(".color-hsl");if(!m||!E||!T)return;let L=()=>{let M=`#${i.selectedColor.r.toString(16).padStart(2,"0")}${i.selectedColor.g.toString(16).padStart(2,"0")}${i.selectedColor.b.toString(16).padStart(2,"0")}`.toUpperCase(),O=`rgb(${i.selectedColor.r}, ${i.selectedColor.g}, ${i.selectedColor.b})`,d=`hsl(${Math.round((i.selectedColor.r+i.selectedColor.g+i.selectedColor.b)/3*360/255)}, 50%, 50%)`;m.textContent=M,E.textContent=O,T.textContent=d};L(),setInterval(()=>{if(i.selectedColor)L()},100)}};var V={UnifiedSphereState:{dragging:!1,v0:null,Q:[1,0,0,0],last:[0,0],zoom:1,selectedColor:{r:0,g:0,b:0},isDragging:!1},initializeColorSphere(i="#color-sphere-canvas",o=null){let m=document.querySelector(i);if(!m)return;let E=m.getContext("2d");E.clearRect(0,0,m.width,m.height),this.RenderColorSphere(E,this.UnifiedSphereState),this.setupCanvasInteraction(m,this.UnifiedSphereState,o),g.setupZoomSlider(this.UnifiedSphereState,m),g.setupColorInfoUpdate(this.UnifiedSphereState,m)},cartesianToSpherical(i,o,m){let E=Math.sqrt(i*i+o*o+m*m);return{r:E,theta:Math.acos(Math.max(-1,Math.min(1,m/E))),phi:Math.atan2(o,i)}},sphericalToCartesian(i,o,m){return{x:i*Math.sin(o)*Math.cos(m),y:i*Math.sin(o)*Math.sin(m),z:i*Math.cos(o)}},screenToSphericalSurface(i,o,m){if(Math.sqrt(i*i+o*o)>m)return null;let E={x:i/m,y:o/m,z:Math.sqrt(m*m-i*i-o*o)/m};return{screen:{x:i,y:o},cartesian:E,spherical:this.cartesianToSpherical(E.x,E.y,E.z)}},mouseClickToSphericalCoordinates(i,o,m){let E=m.getBoundingClientRect();return this.screenToSphericalSurface(i-E.width/2,o-E.height/2,Math.min(E.width,E.height)/2)},colorToCoordinate(i){for(let o=0;o<=Math.PI;o+=0.05)for(let m=-Math.PI;m<=Math.PI;m+=0.05){let E=W.calculateColor(o,m);if(chroma.rgb(E.r,E.g,E.b).hex()===chroma(i).hex())return{theta:o,phi:m}}},normalize(i){let o=Math.sqrt(i.reduce((m,E)=>m+E*E,0));if(o===0)throw Error("영벡터는 정규화할 수 없습니다");return i.map((m)=>m/o)},fromAxisAngle(i,o){let m=Math.sin(o*0.5);return[i[0]*m,i[1]*m,i[2]*m,Math.cos(o*0.5)]},multiply(i,o){return[i[3]*o[0]+i[0]*o[3]+i[1]*o[2]-i[2]*o[1],i[3]*o[1]-i[0]*o[2]+i[1]*o[3]+i[2]*o[0],i[3]*o[2]+i[0]*o[1]-i[1]*o[0]+i[2]*o[3],i[3]*o[3]-i[0]*o[0]-i[1]*o[1]-i[2]*o[2]]},rotateVector(i,o){return this.multiply(this.multiply(i,[o[0],o[1],o[2],0]),[-i[0],-i[1],-i[2],i[3]]).slice(0,3)},slerp(i,o,m){let E=i[0]*o[0]+i[1]*o[1]+i[2]*o[2]+i[3]*o[3],T=Math.acos(Math.abs(E)),L=T*m,M=Math.sin(T),O=Math.cos(L)-E*Math.sin(L)/M,d=Math.sin(L)/M;return[O*i[0]+d*o[0],O*i[1]+d*o[1],O*i[2]+d*o[2],O*i[3]+d*o[3]]},fromDragRotation(i,o,m=0.005){return Math.sqrt(i*i+o*o)*m<0.000001?[1,0,0,0]:this.fromAxisAngle(this.normalize([o,-i,0]),Math.sqrt(i*i+o*o)*m)},fromClickRotation(i,o){return Math.sqrt(i*i+o*o)*Math.PI*0.5<0.000001?[1,0,0,0]:this.fromAxisAngle(this.normalize([o,-i,0]),Math.sqrt(i*i+o*o)*Math.PI*0.5)},RenderColorSphere(i,o){let m=i.canvas.width,E=i.canvas.height,T=m/2,L=E/2,M=(Math.min(m,E)/2-20)*o.zoom;i.clearRect(0,0,m,E);let O=i.createImageData(m,E),d=O.data;for(let _=0;_<E;_++)for(let A=0;A<m;A++){let s=A-T,f=_-L;if(s*s+f*f<=M*M){let h=s/M,l=f/M,R=Math.sqrt(Math.max(0,1-h*h-l*l)),D=this.rotateVector(o.Q,[h,l,R]),C=W.calculateColor(Math.acos(Math.max(-1,Math.min(1,D[2]))),Math.atan2(D[1],D[0])),N=(_*m+A)*4;d[N]=C.r,d[N+1]=C.g,d[N+2]=C.b,d[N+3]=255}}if(i.putImageData(O,0,0),o.selectedColor){let{r:_,g:A,b:s}=o.selectedColor;i.fillStyle=`rgb(${_}, ${A}, ${s})`,i.beginPath(),i.arc(T,L,4,0,2*Math.PI),i.fill();let f=_*0.299+A*0.587+s*0.114;i.strokeStyle=f>127?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",i.lineWidth=2,i.stroke()}},setupCanvasInteraction(i,o,m){let E=null,T=!1,L=i.getContext("2d");i.addEventListener("pointerdown",(M)=>{M.preventDefault(),M.stopPropagation(),o.dragging=!0,o.last=[M.clientX,M.clientY],o.isDragging=!0,E=[M.clientX,M.clientY],T=!1,i.setPointerCapture(M.pointerId),i.style.cursor="grabbing"},{passive:!1}),i.addEventListener("pointermove",(M)=>{if(!o.dragging)return;M.preventDefault(),M.stopPropagation();let O=M.clientX-o.last[0],d=M.clientY-o.last[1];if(o.last=[M.clientX,M.clientY],!T&&E){if(Math.hypot(M.clientX-E[0],M.clientY-E[1])>3)T=!0}let _=this.fromDragRotation(O,d,1/(0.45*Math.min(i.clientWidth,i.clientHeight)));if(_[0]!==1)o.Q=this.multiply(o.Q,_);if(m)m(i);this.RenderColorSphere(L,o)}),i.addEventListener("pointerup",(M)=>{M.preventDefault(),M.stopPropagation(),o.dragging=!1,o.isDragging=!1,i.releasePointerCapture(M.pointerId),i.style.cursor="grab",requestAnimationFrame(()=>{this.RenderColorSphere(L,o)})}),i.addEventListener("click",(M)=>{if(M.preventDefault(),M.stopPropagation(),!T){let O=i.getBoundingClientRect(),d=M.clientX-O.left,_=M.clientY-O.top,A=this.mouseClickToSphericalCoordinates(d,_,i);if(A){let s=[A.cartesian.x,A.cartesian.y,A.cartesian.z],f=[0,0,1],h=[f[1]*s[2]-f[2]*s[1],f[2]*s[0]-f[0]*s[2],f[0]*s[1]-f[1]*s[0]],l=Math.acos(Math.max(-1,Math.min(1,f[0]*s[0]+f[1]*s[1]+f[2]*s[2])));if(l>0.01)this.animateToQuaternion(o,this.fromAxisAngle(this.normalize(h),l),i)}}T=!1,E=null}),i.addEventListener("wheel",(M)=>{M.preventDefault(),M.stopPropagation();let O=i.closest(".custom-color-picker");if(!O)return;let d=O.querySelector(".panel-hex-input");if(!d)return;let _=d.value.replace("#","");if(_.length>=6){let A=_.length===8?parseInt(_.substr(6,2),16):255,s=M.deltaY>0?-4:4;A=Math.max(0,Math.min(255,A+s));let f=_.substr(0,6)+A.toString(16).padStart(2,"0").toUpperCase();d.value="#"+f,d.dispatchEvent(new Event("input",{bubbles:!0})),setTimeout(()=>{if(window.ButtonSystem&&window.ButtonSystem.StyleManager)window.ButtonSystem.StyleManager.scheduleUpdate()},100)}})},animateToQuaternion(i,o,m){let E=[...i.Q],T=performance.now(),L=m.getContext("2d"),M=(O)=>{let d=Math.min((O-T)/1000,1);if(i.Q=this.slerp(E,o,1-Math.pow(1-d,3)),this.RenderColorSphere(L,i),d<1)requestAnimationFrame(M)};requestAnimationFrame(M)}};var q={add:"add.svg","arrow-left":"arrow-left.svg","arrow-right":"arrow-right.svg",cancel:"cancel.svg",contrast:"contrast.svg",delete:"delete.svg",done:"done.svg",exit:"exit.svg",extention:"extention.svg",favicon:"favicon.svg",help:"help.svg",home:"home.svg",info:"info.svg",large:"large.svg",lowpos:"lowpos.svg",minus:"minus.svg",ok:"ok.svg",order:"order.svg",pay:"pay.svg",placeholder:"placeholder.svg",plus:"plus.svg",print:"print.svg",reset:"reset.svg",restart:"restart.svg","soldout-large":"soldout-large.svg","soldout-small":"soldout-small.svg",step:"step.svg",takein:"takein.svg",takeout:"takeout.svg",time:"time.svg",toggle:"toggle.svg",volume:"volume.svg",warning:"warning.svg"},Oi={default:".content.icon:not(.pressed)",toggle:".content.icon.pressed",contrast:'[data-icon="contrast"]',large:'[data-icon="large"]'};function Ai(i){return Oi[i]||`[data-icon="${i}"]`}function K(i){let o=q[i];if(!o)return console.warn(`⚠️ Icon "${i}" not found in iconPaths, using placeholder`),"src/assets/icons/placeholder.svg";return`src/assets/icons/${o}`}function t(){let i={};for(let[o,m]of Object.entries(q)){if(o==="placeholder"&&i.default)continue;i[o]={path:K(o),selector:Ai(o)}}return i}var P="placeholder";var v={cache:new Map,get iconMap(){return t()},convertToCurrentColor(i){return i.replace(/fill="(?!none|transparent)[^"]*"/gi,'fill="currentColor"').replace(/stroke="(?!none|transparent)[^"]*"/gi,'stroke="currentColor"').replace(/fill='(?!none|transparent)[^']*'/gi,"fill='currentColor'").replace(/stroke='(?!none|transparent)[^']*'/gi,"stroke='currentColor'").replace(/fill:\s*(?!none|transparent)[^;}\s]+/gi,"fill: currentColor").replace(/stroke:\s*(?!none|transparent)[^;}\s]+/gi,"stroke: currentColor")},async preloadAllIcons(){let i=Object.entries(this.iconMap).map(async([o,m])=>{try{let E=await fetch(m.path);if(!E.ok)throw Error(`SVG not found: ${m.path}`);let T=await E.text();this.cache.set(o,T),console.log(`✅ Loaded ${o} icon`)}catch(E){console.warn(`⚠️ Failed to load ${o} icon from ${m.path}, using fallback`);try{let T=K(P),L=await fetch(T);if(L.ok)this.cache.set(o,await L.text());else this.cache.set(o,"")}catch(T){console.error(`❌ Fallback also failed for ${o}`),this.cache.set(o,"")}}});await Promise.all(i)},injectAllIcons(){Object.entries(this.iconMap).forEach(([i,o])=>{let m=this.cache.get(i);if(!m){console.warn(`⚠️ No cached SVG for ${i}`);return}let E=this.convertToCurrentColor(m),T=document.querySelectorAll(o.selector);if(T.length===0)console.log(`ℹ️ No elements found for selector: ${o.selector}`);T.forEach((L)=>{L.innerHTML=E})}),console.log("✅ All icons injected to DOM (converted to currentColor)")},async loadAndInject(){await this.preloadAllIcons(),this.injectAllIcons()},getCached(i,o=!0){let m=this.cache.get(i)||"";return o?this.convertToCurrentColor(m):m}};var x={inject(i,o,m=""){let E=document.getElementById(i);if(E)E.remove();let T=document.createElement("style");T.id=i,T.textContent=o,document.head.appendChild(T)}};var n={BASE:0.03125,get BACKGROUND_BORDER_RADIUS(){return this.BASE},get BUTTON_BORDER_RADIUS(){return 2*this.BACKGROUND_BORDER_RADIUS},get BACKGROUND_OUTLINE_WIDTH(){return this.BASE},get BUTTON_PADDING(){return this.BACKGROUND_OUTLINE_WIDTH},get BUTTON_OUTLINE_WIDTH(){return 3*this.BACKGROUND_OUTLINE_WIDTH},get BUTTON_OUTLINE_OFFSET(){return-1*this.BACKGROUND_OUTLINE_WIDTH},get SELECTED_ICON_SIZE(){return 4*this.BASE}};var Y={generateCSS(){let i=document.querySelectorAll(".button"),o=new Set,m=["toggle"];i.forEach((O)=>{let d=Array.from(O.classList),_=["button","pressed","dynamic",...m],A=d.find((s)=>!_.includes(s));if(A)o.add(A)});let E="",T="",L="";o.forEach((O)=>{let d=["primary1","primary2","primary3","secondary1","secondary2","secondary3","custom"].includes(O);if([{name:"default",selector:"",disabled:!1},{name:"pressed",selector:".pressed:not(.toggle)",disabled:!1,isToggle:!1},{name:"pressed",selector:".pressed.toggle",disabled:!1,isToggle:!0},{name:"disabled",selector:'[aria-disabled="true"]',disabled:!0,isToggle:!1}].forEach(({name:_,selector:A,disabled:s,isToggle:f=!1})=>{let h=O==="primary1"&&_==="default"&&!s?`&${A}`:null,l=`&.${O}${A}`;if(h)L+=`
    ${h} {
      & .background.dynamic {
        background: var(--${O}-background-color-${_});
        outline-color: var(--${O}-border-color-${_});
        outline-style: var(--border-style-default);
        
        & .content {
          color: var(--${O}-content-color-${_});
        }
      }
    }`;let R=O==="primary3"||O==="secondary3"?`var(--${O}-background1-color-${_})`:`var(--${O}-background-color-${_})`;L+=`
    ${l} {
      & .background.dynamic {
        background: ${R};
        outline-color: var(--${O}-border-color-${_});
        ${_==="default"?"outline-style: var(--border-style-default);":""}
        ${_==="pressed"?"outline-style: var(--border-style-pressed); outline-width: var(--border-style-pressed);":""}
        ${_==="disabled"?"outline-style: var(--border-style-disabled);":""}
        
        & .content {
          color: var(--${O}-content-color-${_});
        }
      }
      ${_==="pressed"&&f?"&.toggle { & .content.icon.pressed { display: var(--content-icon-display-pressed-toggle); } }":""}
      ${s?"cursor: var(--button-cursor-disabled);":""}
    }`}),!d)["content-color-default","content-color-pressed","content-color-disabled","background-color-default","background-color-pressed","background-color-disabled","border-color-default","border-color-pressed","border-color-disabled"].forEach((A)=>{E+=`  --${O}-${A}: var(--custom-${A});
`,T+=`  --${O}-${A}: var(--custom-${A});
`})});let M=`
/* HTML 클래스 기반 수정자 시스템 - CSS 상속 활용 */
${E?`:root {
${E}}`:""}

${T?`.dark {
${T}}`:""}

@layer components {
  .button {${L}
  }
}
`;return window.AppUtils.CSSInjector.inject("palette-system-styles",M,"팔레트 시스템"),o}};var X={scheduleUpdate(){this.waitForRenderCompletion().then(()=>{this.updateButtonLabels()})},async waitForRenderCompletion(){return new Promise((i)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{setTimeout(()=>{i()},16)})})})},setupUpdateManager(){let i=new MutationObserver((o)=>{let m=!1;if(o.forEach((E)=>{let T=E.target;if(E.type==="attributes"&&E.attributeName==="class"){if(T.classList.contains("button"))m=!0}if(E.type==="attributes"&&E.attributeName==="style"){if(T===document.documentElement)m=!0}}),m)this.scheduleUpdate()});return document.querySelectorAll(".button").forEach((o)=>{i.observe(o,{attributes:!0,attributeFilter:["class"]})}),i.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}),i},calculateContrastRGBA(i,o,m,E,T,L){let M=(f,h,l)=>{let[R,D,C]=[f,h,l].map((N)=>{return N=N/255,N<=0.03928?N/12.92:Math.pow((N+0.055)/1.055,2.4)});return 0.2126*R+0.7152*D+0.0722*C},O=M(i,o,m),d=M(E,T,L),_=Math.max(O,d),A=Math.min(O,d);return(_+0.05)/(A+0.05)},calculateContrast(i,o){let m=(_)=>{if(!_||_==="transparent")throw Error("유효하지 않은 색상 값입니다");let A=_.match(/rgba?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)/);if(A)return[Math.round(parseFloat(A[1])),Math.round(parseFloat(A[2])),Math.round(parseFloat(A[3]))];if(_.startsWith("#")){let s=_.replace("#","");if(s.length>=6)return[parseInt(s.substr(0,2),16),parseInt(s.substr(2,2),16),parseInt(s.substr(4,2),16)]}throw Error(`색상 파싱 실패: ${_}`)},[E,T,L]=m(i),[M,O,d]=m(o);return this.calculateContrastRGBA(E,T,L,M,O,d)},updateButtonLabels(){document.querySelectorAll(".button").forEach((o)=>{let m=o.querySelector(".background.dynamic"),E=o.querySelector(".content"),T=o.querySelector(".content.label");if(m&&E&&T){m.offsetHeight,E.offsetHeight;let L=getComputedStyle(m),M=getComputedStyle(E),O=L.backgroundColor,d=M.color,A=this.calculateContrast(d,O).toFixed(2),s=T.innerHTML.split("<br>")[0];T.innerHTML=`${s}<br>${A}`}})},applyDynamicStyles(){let i=document.querySelectorAll(".button");if(i.length===0)return;let o=0;for(let m of i){let E=m.querySelector(".background");if(!E)continue;let T=m.getBoundingClientRect(),L=Math.min(T.width,T.height),M=L*window.ButtonSystem.CONSTANTS.BUTTON_PADDING,O=L*window.ButtonSystem.CONSTANTS.BUTTON_BORDER_RADIUS,d=L*window.ButtonSystem.CONSTANTS.BUTTON_OUTLINE_WIDTH,_=L*window.ButtonSystem.CONSTANTS.BUTTON_OUTLINE_OFFSET,A=L*window.ButtonSystem.CONSTANTS.BACKGROUND_BORDER_RADIUS,s=L*window.ButtonSystem.CONSTANTS.BACKGROUND_OUTLINE_WIDTH,f=L*window.ButtonSystem.CONSTANTS.SELECTED_ICON_SIZE,h=window.ButtonSystem.state.styleCache.get(m)||{};if(!((h.minSide||0)!==L||(h.buttonPadding||0)!==M||(h.buttonBorderRadius||0)!==O||(h.buttonOutlineWidth||0)!==d||(h.buttonOutlineOffset||0)!==_||(h.backgroundBorderRadius||0)!==A||(h.backgroundOutlineWidth||0)!==s||(h.iconSelectedSize||0)!==f))continue;m.style.padding=`${M}px`,m.style.borderRadius=`${O}px`,m.style.outlineWidth=`${d}px`,m.style.outlineOffset=`${_}px`,E.style.borderRadius=`${A}px`,E.style.outlineWidth=`${s}px`;let R=m.querySelector(".content.icon.pressed");if(R)R.style.width=`${f}px`,R.style.height=`${f}px`,R.style.top=`${M}px`,R.style.right=`${M}px`;window.ButtonSystem.state.styleCache.set(m,{minSide:L,buttonPadding:M,buttonBorderRadius:O,buttonOutlineWidth:d,buttonOutlineOffset:_,backgroundBorderRadius:A,backgroundOutlineWidth:s,iconSelectedSize:f}),o++}this.updateButtonLabels()},async setupIconInjection(){await this.waitForRenderCompletion();let i=document.querySelectorAll(".button");for(let o of i){let m=o.querySelector(".background");if(!m)continue;if(o.classList.contains("toggle")){let T=m.querySelector(".content.icon.pressed");if(!T){T=document.createElement("span"),T.className="content icon pressed";let L=m.querySelector(".content.icon:not(.pressed)");if(L&&L.parentNode)m.insertBefore(T,L);else m.insertBefore(T,m.firstChild)}}}for(let o of i){let m=o.classList.contains("toggle"),E=o.classList.contains("pressed");if(m)o.dataset.isToggleButton="true",o.setAttribute("aria-pressed",E?"true":"false")}},scheduleContrastUpdate(){this.scheduleUpdate()}};var p={CONSTANTS:n,state:{styleCache:new WeakMap},PaletteManager:Y,StyleManager:X,async init(){console.log("\uD83D\uDD18 [ButtonSystem] 초기화 시작");let i=performance.now();console.log("  ├─ 1단계: SVG 로딩 및 DOM 주입");let o=performance.now();await window.AppUtils.SVGLoader.loadAndInject(),console.log(`  ✅ SVG 로딩 완료 (${(performance.now()-o).toFixed(2)}ms)`),console.log("  ├─ 2단계: 토글 버튼 구조 준비"),await this.StyleManager.setupIconInjection(),console.log("  ✅ 토글 버튼 준비 완료"),console.log("  ├─ 3단계: 팔레트 CSS 생성"),this.PaletteManager.generateCSS(),console.log("  ✅ 팔레트 CSS 생성 완료"),console.log("  ├─ 4단계: 동적 스타일 적용"),this.StyleManager.applyDynamicStyles(),console.log("  ✅ 동적 스타일 적용 완료"),console.log("  ├─ 5단계: 자동 업데이트 매니저 설정"),this.StyleManager.setupUpdateManager(),console.log("  ✅ 업데이트 매니저 설정 완료");let m=performance.now();console.log(`\uD83C\uDF89 [ButtonSystem] 초기화 완료 (총 ${(m-i).toFixed(2)}ms)`)}};var r={THEMES:{LIGHT:"light",DARK:"dark"},STORAGE_KEY:"theme-mode",MANUAL_MODE_KEY:"manual-theme-mode",_domCache:{html:null,toggleButton:null,toggleLabel:null,liveRegion:null},currentTheme:"light",isManualMode:!1,init(){console.log("\uD83C\uDFA8 [ThemeManager] 초기화 시작"),this._initDOMCache(),this.loadSettings(),console.log("  ├─ 현재 테마:",this.currentTheme,"| 수동 모드:",this.isManualMode),this.setupEventListeners(),this.applyCurrentState(),this.syncToggleButton(),console.log("✅ [ThemeManager] 초기화 완료")},_initDOMCache(){if(this._domCache.html=document.documentElement,this._domCache.html.classList.remove("no-js"),this._domCache.html.classList.add("js"),this._domCache.toggleButton=document.querySelector(".theme-toggle"),this._domCache.toggleButton)this._domCache.toggleLabel=this._domCache.toggleButton.querySelector(".label");this._domCache.liveRegion=document.getElementById("theme-announcer")},loadSettings(){let i=localStorage.getItem(this.STORAGE_KEY),o=localStorage.getItem(this.MANUAL_MODE_KEY);if(this.isManualMode=o==="true",this.isManualMode)this.currentTheme=i===this.THEMES.DARK?this.THEMES.DARK:this.THEMES.LIGHT;else this.currentTheme=this.THEMES.LIGHT},applyCurrentState(){let i=this._domCache.html;if(this.currentTheme===this.THEMES.DARK)i.classList.add("dark");else i.classList.remove("dark");if(this.isManualMode)i.classList.add("manual-theme-mode");else i.classList.remove("manual-theme-mode")},saveSettings(){localStorage.setItem(this.STORAGE_KEY,this.currentTheme),localStorage.setItem(this.MANUAL_MODE_KEY,this.isManualMode.toString())},syncToggleButton(){let i=this._domCache.toggleButton;if(i){let o=this.currentTheme===this.THEMES.DARK;i.setAttribute("aria-pressed",o.toString());let m=this._domCache.toggleLabel;if(m)m.innerHTML=o?"Light<br>테마":"Dark<br>테마"}},toggle(){this.currentTheme=this.currentTheme===this.THEMES.LIGHT?this.THEMES.DARK:this.THEMES.LIGHT,this.isManualMode=!0,this.applyCurrentState(),this.saveSettings(),this.syncToggleButton(),this.announceChange()},announceChange(){let o=`${this.currentTheme===this.THEMES.DARK?"Dark 테마":"Light 테마"}로 전환되었습니다.`,m=this._domCache.liveRegion;if(!m)m=document.createElement("div"),m.id="theme-announcer",m.setAttribute("aria-live","polite"),m.setAttribute("aria-atomic","true"),m.style.position="absolute",m.style.left="-10000px",m.style.width="1px",m.style.height="1px",m.style.overflow="hidden",document.body.appendChild(m),this._domCache.liveRegion=m;m.textContent=o},setupEventListeners(){let i=document.querySelector(".theme-toggle");if(i)i.addEventListener("click",()=>this.toggle());document.addEventListener("keydown",(o)=>{if(o.ctrlKey&&o.altKey&&o.key.toLowerCase()==="h")o.preventDefault(),this.toggle()})}};var a={MODES:{DEFAULT:"default",LARGE:"large"},STORAGE_KEY:"large-mode",_domCache:{html:null,toggleButton:null,toggleLabel:null,liveRegion:null},currentMode:"default",init(){console.log("\uD83D\uDCCF [LargeTextManager] 초기화 시작"),this._initDOMCache(),this.loadSettings(),console.log("  ├─ 현재 모드:",this.currentMode),this.setupEventListeners(),this.applyCurrentState(),this.syncToggleButton(),console.log("✅ [LargeTextManager] 초기화 완료")},_initDOMCache(){if(this._domCache.html=document.documentElement,this._domCache.toggleButton=document.querySelector(".large-toggle"),this._domCache.toggleButton)this._domCache.toggleLabel=this._domCache.toggleButton.querySelector(".label");this._domCache.liveRegion=document.getElementById("large-announcer")},loadSettings(){let i=localStorage.getItem(this.STORAGE_KEY);this.currentMode=i===this.MODES.LARGE?this.MODES.LARGE:this.MODES.DEFAULT},applyCurrentState(){let i=this._domCache.html;if(this.currentMode===this.MODES.LARGE)i.classList.add("large");else i.classList.remove("large")},saveSettings(){localStorage.setItem(this.STORAGE_KEY,this.currentMode)},syncToggleButton(){let i=this._domCache.toggleButton;if(i){let o=this.currentMode===this.MODES.LARGE;i.setAttribute("aria-pressed",o.toString());let m=this._domCache.toggleLabel;if(m)m.innerHTML=o?"기본<br>글씨":"큰글씨<br>모드"}},toggle(){this.currentMode=this.currentMode===this.MODES.DEFAULT?this.MODES.LARGE:this.MODES.DEFAULT,this.applyCurrentState(),this.saveSettings(),this.syncToggleButton(),this.announceChange()},announceChange(){let o=`${this.currentMode===this.MODES.LARGE?"큰글씨 모드":"기본 글씨 크기"}로 전환되었습니다.`,m=this._domCache.liveRegion;if(!m)m=document.createElement("div"),m.id="large-announcer",m.setAttribute("aria-live","polite"),m.setAttribute("aria-atomic","true"),m.style.position="absolute",m.style.left="-10000px",m.style.width="1px",m.style.height="1px",m.style.overflow="hidden",document.body.appendChild(m),this._domCache.liveRegion=m;m.textContent=o},setupEventListeners(){let i=document.querySelector(".large-toggle");if(i)i.addEventListener("click",()=>this.toggle());document.addEventListener("keydown",(o)=>{if(o.ctrlKey&&o.altKey&&o.key.toLowerCase()==="l")o.preventDefault(),this.toggle()})}};var e={DEFAULT_WIDTH:256,DEFAULT_HEIGHT:256,_domCache:{widthSlider:null,heightSlider:null,widthValue:null,heightValue:null,resetButton:null,allButtons:null},currentWidth:256,currentHeight:256,init(){console.log("\uD83D\uDCD0 [SizeControlManager] 초기화 시작"),this._initDOMCache(),this.setupEventListeners(),this.updateDisplay(),console.log("  ├─ 기본 크기:",`${this.currentWidth}x${this.currentHeight}px`),console.log("✅ [SizeControlManager] 초기화 완료")},_initDOMCache(){this._domCache.widthSlider=document.querySelector(".button-width"),this._domCache.heightSlider=document.querySelector(".button-height"),this._domCache.widthValue=document.querySelector(".width-value"),this._domCache.heightValue=document.querySelector(".height-value"),this._domCache.resetButton=document.querySelector(".scaling.reset"),this._domCache.allButtons=document.querySelectorAll(".button")},setupEventListeners(){if(this._domCache.widthSlider)this._domCache.widthSlider.addEventListener("input",(i)=>{this.currentWidth=parseInt(i.target.value),this.updateButtonSizes(),this.updateDisplay()});if(this._domCache.heightSlider)this._domCache.heightSlider.addEventListener("input",(i)=>{this.currentHeight=parseInt(i.target.value),this.updateButtonSizes(),this.updateDisplay()});if(this._domCache.resetButton)this._domCache.resetButton.addEventListener("click",()=>{this.resetToDefault()})},updateButtonSizes(){if(this._domCache.allButtons.forEach((i)=>{i.style.width=`${this.currentWidth}px`,i.style.height=`${this.currentHeight}px`}),typeof ButtonSystem<"u"&&ButtonSystem.StyleManager)requestAnimationFrame(()=>{ButtonSystem.StyleManager.applyDynamicStyles()})},updateDisplay(){if(this._domCache.widthValue)this._domCache.widthValue.textContent=`${this.currentWidth}px`;if(this._domCache.heightValue)this._domCache.heightValue.textContent=`${this.currentHeight}px`},resetToDefault(){if(this.currentWidth=this.DEFAULT_WIDTH,this.currentHeight=this.DEFAULT_HEIGHT,this._domCache.widthSlider)this._domCache.widthSlider.value=this.currentWidth;if(this._domCache.heightSlider)this._domCache.heightSlider.value=this.currentHeight;this.updateButtonSizes(),this.updateDisplay()}};var J={CUSTOM_PALETTE_NAME:"custom",_domCache:{lightInputs:{},darkInputs:{},resetBtn:null,testButtons:null},currentPalette:{name:"custom"},CustomColorPicker:{get sphereState(){return Mechanics.UnifiedSphereState},init(){console.log("  ├─ [CustomColorPicker] 초기화 시작"),this.generateLightThemePickers(),console.log("    ✅ Light 테마 피커 생성"),this.generateDarkThemePickers(),console.log("    ✅ Dark 테마 피커 생성"),this.setupColorDisplays(),console.log("    ✅ 컬러 디스플레이 설정"),this.setup3DCanvasInteraction(),console.log("    ✅ 3D 캔버스 인터랙션 설정"),this.setupHexInputs(),console.log("    ✅ Hex 입력 설정")},generateLightThemePickers(){let i=document.getElementById("light-color-pickers");if(!i){console.warn("⚠️ [CustomColorPicker] light-color-pickers 요소를 찾을 수 없음");return}console.log("    ├─ light-color-pickers 찾음:",i),[{id:"light-content-default",label:"콘텐츠(기본)",color:"rgba(255, 255, 255, 1)",hex:"#FFFFFFFF",hue:0,alpha:255},{id:"light-content-pressed",label:"콘텐츠(눌림)",color:"rgba(140, 83, 44, 1)",hex:"#8C532CFF",hue:25,alpha:255},{id:"light-content-disabled",label:"콘텐츠(비활성)",color:"rgba(140, 83, 44, 1)",hex:"#8C532CFF",hue:25,alpha:255},{id:"light-background-default",label:"배경(기본)",color:"rgba(164, 105, 63, 1)",hex:"#A4693FFF",hue:25,alpha:255},{id:"light-background-pressed",label:"배경(눌림)",color:"rgba(238, 220, 210, 1)",hex:"#EEDCD2FF",hue:25,alpha:255},{id:"light-background-disabled",label:"배경(비활성)",color:"transparent",hex:"#00000000",hue:0,alpha:0},{id:"light-border-default",label:"테두리(기본)",color:"rgba(164, 105, 63, 1)",hex:"#A4693FFF",hue:25,alpha:255},{id:"light-border-pressed",label:"테두리(눌림)",color:"rgba(140, 83, 44, 1)",hex:"#8C532CFF",hue:25,alpha:255},{id:"light-border-disabled",label:"테두리(비활성)",color:"rgba(140, 83, 44, 1)",hex:"#8C532CFF",hue:25,alpha:255}].forEach((m)=>{let E=`
            <div class="palette-input-group">
              <label for="${m.id}">${m.label}:</label>
              <div class="custom-color-picker" data-target="${m.id}">
                <div class="color-display" style="background: ${m.color}"></div>
                <div class="color-picker-panel">
                  <!-- 색상구체 캔버스 -->
                  <canvas id="color-sphere-canvas" class="color-canvas-3d" width="400" height="400" aria-label="3D 색상 구체 선택기"></canvas>
                  
                  <!-- 색상 정보 표시 -->
                  <section class="color-info">
                    <div class="picker-color-display">
                      <h3>선택된 색상</h3>
                      <div class="picker-color-preview-container">
                        <div class="picker-color-preview" id="selected-color-preview"></div>
                        <div class="picker-color-details">
                        <p>HEX: <span id="selected-color-hex">#FFFFFF</span></p>
                        <p>RGB: <span id="selected-color-rgb">rgb(255, 255, 255)</span></p>
                        <p>HSL: <span id="selected-color-hsl">hsl(0, 0%, 100%)</span></p>
                    </div>
                  </div>
                    </div>
                    
                    <!-- 확대/축소 컨트롤 -->
                    <div class="picker-zoom-controls">
                      <h3>구체 크기 조절</h3>
                      <div class="scaling zoom">
                        <label for="zoom-slider">확대/축소:</label>
                        <input 
                          type="range" 
                          id="zoom-slider" 
                          min="0.1" 
                          max="3.0" 
                          step="0.1" 
                          value="1.0"
                          aria-label="색상 구체 확대/축소 (10% ~ 300%)"
                        >
                        <span class="size value zoom-value">100%</span>
                      </div>
                    </div>
                    
                    <!-- 색상 코드 입력 -->
                  <div class="picker-color-input-group">
                    <label>색상 코드</label>
                    <input type="text" class="panel-hex-input" value="${m.hex}" maxlength="9" placeholder="#RRGGBBAA">
                  </div>
                    
                    <!-- 구체 정보 -->
                    <div class="picker-sphere-info">
                      <small>\uD83C\uDF10 3D 색상 구체 | 드래그: 회전 | 휠: 알파 조절</small>
                    </div>
                  </section>
                </div>
              </div>
              <input type="text" class="hex-input" value="${m.hex}">
            </div>
          `;i.innerHTML+=E})},generateDarkThemePickers(){let i=document.getElementById("dark-color-pickers");if(!i)return;[{id:"dark-content-default",label:"콘텐츠(기본)",color:"rgba(0, 0, 0, 1)",hex:"#000000FF",hue:0,alpha:255},{id:"dark-content-pressed",label:"콘텐츠(눌림)",color:"rgba(255, 239, 128, 1)",hex:"#FFEF80FF",hue:54,alpha:255},{id:"dark-content-disabled",label:"콘텐츠(비활성)",color:"rgba(255, 225, 0, 1)",hex:"#FFE100FF",hue:54,alpha:255},{id:"dark-background-default",label:"배경(기본)",color:"rgba(255, 225, 0, 1)",hex:"#FFE100FF",hue:54,alpha:255},{id:"dark-background-pressed",label:"배경(눌림)",color:"rgba(36, 31, 0, 1)",hex:"#241F00FF",hue:54,alpha:255},{id:"dark-background-disabled",label:"배경(비활성)",color:"transparent",hex:"#00000000",hue:0,alpha:0},{id:"dark-border-default",label:"테두리(기본)",color:"rgba(255, 225, 0, 1)",hex:"#FFE100FF",hue:54,alpha:255},{id:"dark-border-pressed",label:"테두리(눌림)",color:"rgba(255, 239, 128, 1)",hex:"#FFEF80FF",hue:54,alpha:255},{id:"dark-border-disabled",label:"테두리(비활성)",color:"rgba(255, 225, 0, 1)",hex:"#FFE100FF",hue:54,alpha:255}].forEach((m)=>{let E=`
            <div class="palette-input-group">
              <label for="${m.id}">${m.label}:</label>
              <div class="custom-color-picker" data-target="${m.id}">
                <div class="color-display" style="background: ${m.color}"></div>
                <div class="color-picker-panel">
                  <!-- 색상구체 캔버스 -->
                  <canvas id="color-sphere-canvas" class="color-canvas-3d" width="400" height="400" aria-label="3D 색상 구체 선택기"></canvas>
                  
                  <!-- 색상 정보 표시 -->
                  <section class="color-info">
                    <div class="picker-color-display">
                      <h3>선택된 색상</h3>
                      <div class="picker-color-preview-container">
                        <div class="picker-color-preview" id="selected-color-preview"></div>
                        <div class="picker-color-details">
                        <p>HEX: <span id="selected-color-hex">#FFFFFF</span></p>
                        <p>RGB: <span id="selected-color-rgb">rgb(255, 255, 255)</span></p>
                        <p>HSL: <span id="selected-color-hsl">hsl(0, 0%, 100%)</span></p>
                    </div>
                  </div>
                    </div>
                    
                    <!-- 확대/축소 컨트롤 -->
                    <div class="picker-zoom-controls">
                      <h3>구체 크기 조절</h3>
                      <div class="scaling zoom">
                        <label for="zoom-slider">확대/축소:</label>
                        <input 
                          type="range" 
                          id="zoom-slider" 
                          min="0.1" 
                          max="3.0" 
                          step="0.1" 
                          value="1.0"
                          aria-label="색상 구체 확대/축소 (10% ~ 300%)"
                        >
                        <span class="size value zoom-value">100%</span>
                      </div>
                    </div>
                    
                    <!-- 색상 코드 입력 -->
                  <div class="picker-color-input-group">
                    <label>색상 코드</label>
                    <input type="text" class="panel-hex-input" value="${m.hex}" maxlength="9" placeholder="#RRGGBBAA">
                  </div>
                    
                    <!-- 구체 정보 -->
                    <div class="picker-sphere-info">
                      <small>\uD83C\uDF10 3D 색상 구체 | 드래그: 회전 | 휠: 알파 조절</small>
                    </div>
                  </section>
                </div>
              </div>
              <input type="text" class="hex-input" value="${m.hex}">
            </div>
          `;i.innerHTML+=E})},setupColorDisplays(){document.querySelectorAll(".color-display").forEach((i)=>{i.addEventListener("click",(o)=>{let m=o.target.closest(".custom-color-picker"),E=m.querySelector(".color-picker-panel");if(document.querySelectorAll(".color-picker-panel").forEach((T)=>T.classList.remove("active")),E.classList.toggle("active"),E.classList.contains("active")){this.initialize3DCanvas(m);let T=m.parentElement.querySelector(".hex-input");if(T&&T.value){let L=T.value.replace("#","").toUpperCase();if(L.length===8&&/^[0-9A-F]{8}$/.test(L)){let M=parseInt(L.substr(0,2),16),O=parseInt(L.substr(2,2),16),d=parseInt(L.substr(4,2),16)}}}})}),document.addEventListener("click",(i)=>{if(!i.target.closest(".custom-color-picker"))document.querySelectorAll(".color-picker-panel").forEach((o)=>{o.classList.remove("active")})})},initialize3DCanvas(i){let o=i.querySelector(".color-canvas-3d");if(o){let m=o.getContext("2d");m.clearRect(0,0,o.width,o.height),Mechanics.RenderColorSphere(m,Mechanics.UnifiedSphereState),Mechanics.setupCanvasInteraction(o,Mechanics.UnifiedSphereState,(E)=>this.updateCenterColorRealtime(E))}},setup3DCanvasInteraction(){let i=(E)=>{Mechanics.setupCanvasInteraction(E,Mechanics.UnifiedSphereState,(T)=>this.updateCenterColorRealtime(T))},o=(E,T)=>{let L=T.getBoundingClientRect(),M=E.clientX-L.left,O=E.clientY-L.top,d=L.width/2,_=L.height/2,A=(Math.min(L.width,L.height)/2-20)*this.sphereState.zoom,s=M-d,f=O-_,h=Math.sqrt(s*s+f*f);if(h<=A){let l=s/A,R=f/A,D=Math.sqrt(Math.max(0,1-l*l-R*R)),C=Mechanics.rotateVector(Mechanics.UnifiedSphereState.Q,[l,R,D]),[N,F,B]=C,w=Math.atan2(F,N),U=Math.acos(Math.max(-1,Math.min(1,B))),G=(w+Math.PI)/(2*Math.PI)*360;if(G>=360)G=0;let y=h/A,Ti=(Math.PI-U)/Math.PI,S=Topology.calculateColor(U,w),{r:j,g:Z,b:Q}=S;Mechanics.UnifiedSphereState.selectedColor={r:j,g:Z,b:Q,hue:G};let c=T.closest(".custom-color-picker"),Li=c.dataset.target,I=c.querySelector(".panel-hex-input"),u=255;if(I&&I.value){let k=I.value.replace("#","");if(k.length===8)u=parseInt(k.substr(6,2),16)}let H={r:j,g:Z,b:Q},z=ColorConverter.rgbaToHex(j,Z,Q,u);this.updateColorInputs(Li,H,u,z),this.updateSelectedColorInfo(H,u,z),this.updateSelectedColorInfo(H,u,z)}};this.selectColorAt3D=o,this.updateCenterColorRealtime=(E)=>{let O=Mechanics.rotateVector(Mechanics.UnifiedSphereState.Q,[0,0,1]),[d,_,A]=O,s=Math.atan2(_,d),f=Math.acos(Math.max(-1,Math.min(1,A))),h=Topology.calculateColor(f,s),{r:l,g:R,b:D}=h;Mechanics.UnifiedSphereState.selectedColor={r:l,g:R,b:D};let C=E.closest(".custom-color-picker");if(!C)return;let N=C.dataset.target,F=C.querySelector(".panel-hex-input"),B=255;if(F&&F.value){let G=F.value.replace("#","");if(G.length===8)B=parseInt(G.substr(6,2),16)}let w={r:l,g:R,b:D},U=ColorConverter.rgbaToHex(l,R,D,B);requestAnimationFrame(()=>{this.updateColorInputs(N,w,B,U),this.updateSelectedColorInfo(w,B,U),this.updateSelectedColorInfo(w,B,U)})};let m=(E,T)=>{let L=T.getBoundingClientRect(),M=E.clientX-L.left,O=E.clientY-L.top,d=Math.max(0,Math.min(100,M/L.width*100)),_=Math.max(0,Math.min(100,(1-O/L.height)*100)),A=T.closest(".custom-color-picker"),s=A.querySelector(".hue-slider"),f=A.querySelector(".alpha-slider"),h=A.dataset.target,l=parseInt(s?.value||0),R=parseInt(f?.value||255),D=ColorConverter.hsvToRgb(l,d,_),C=ColorConverter.rgbaToHex(D.r,D.g,D.b,R);this.updateColorInputs(h,D,R,C),this.updateSelectedColorInfo(D,R,C)};document.querySelectorAll(".color-canvas-3d").forEach((E)=>{i(E),E.addEventListener("wheel",(T)=>{T.preventDefault(),T.stopPropagation();let L=E.closest(".custom-color-picker"),M=L.querySelector(".panel-hex-input");if(M){let O=M.value.replace("#",""),d=255;if(!O||O.length<6)throw Error("유효하지 않은 헥스 색상입니다");if(O.length===8)d=parseInt(O.substr(6,2),16);else if(O.length===6)d=255;let _=T.deltaY>0?-4:4,A=Math.max(0,Math.min(255,d+_));if(O.length>=6){let s=O.substr(0,6),f="#"+s+A.toString(16).padStart(2,"0").toUpperCase(),h=L.dataset.target,l=parseInt(s.substr(0,2),16),R=parseInt(s.substr(2,2),16),D=parseInt(s.substr(4,2),16);this.updateColorInputs(h,{r:l,g:R,b:D},A,f),setTimeout(()=>{if(window.ButtonSystem&&window.ButtonSystem.StyleManager)window.ButtonSystem.StyleManager.scheduleUpdate()},100)}}})})},setupHexInputs(){document.querySelectorAll(".panel-hex-input").forEach((i)=>{i.addEventListener("input",(o)=>{let m=o.target.value.replace("#","").toUpperCase();if(m.length===8&&/^[0-9A-F]{8}$/.test(m)){let E=parseInt(m.substr(0,2),16),T=parseInt(m.substr(2,2),16),L=parseInt(m.substr(4,2),16),M=parseInt(m.substr(6,2),16),O=o.target.closest(".custom-color-picker"),d=O.dataset.target,_="#"+m,A=O.querySelector(".color-canvas-3d");if(A){let s=A.getContext("2d");Mechanics.RenderColorSphere(s,A.className)}this.updateColorInputs(d,{r:E,g:T,b:L},M,_),this.updateSelectedColorInfo({r:E,g:T,b:L},M,_)}})})},updateSelectedColorInfo(i,o,m){document.querySelectorAll(".color-picker-panel .picker-color-preview").forEach((O)=>{O.style.background=m});let E=document.getElementById("selected-color-preview");if(E)E.style.background=m;document.querySelectorAll(".color-picker-panel #selected-color-hex").forEach((O)=>{O.textContent=m}),document.querySelectorAll(".color-picker-panel #selected-color-rgb").forEach((O)=>{O.textContent=`rgb(${i.r}, ${i.g}, ${i.b})`}),document.querySelectorAll(".color-picker-panel #selected-color-hsl").forEach((O)=>{let d=ColorConverter.rgbToHsl(i.r,i.g,i.b);O.textContent=`hsl(${Math.round(d.h)}, ${Math.round(d.s)}%, ${Math.round(d.l)}%)`});let T=document.getElementById("selected-color-hex"),L=document.getElementById("selected-color-rgb"),M=document.getElementById("selected-color-hsl");if(T)T.textContent=m;if(L)L.textContent=`rgb(${i.r}, ${i.g}, ${i.b})`;if(M){let O=ColorConverter.rgbToHsl(i.r,i.g,i.b);M.textContent=`hsl(${Math.round(O.h)}, ${Math.round(O.s)}%, ${Math.round(O.l)}%)`}},updateColorInputs(i,o,m,E){let T=document.querySelector(`[data-target="${i}"]`),L=T?.parentElement?.querySelector(".hex-input"),M=T?.querySelector(".panel-hex-input"),O=T?.querySelector(".color-display");if(L)L.value=E;if(M)M.value=E;if(O)O.style.background=E;if(this.updateCSSVariable(i,E),typeof J<"u")J.generateAndApplyPalette()},updateCSSVariable(i,o){let m=document.documentElement,T={"light-content-default":"--custom-content-color-default","light-content-pressed":"--custom-content-color-pressed","light-content-disabled":"--custom-content-color-disabled","light-background-default":"--custom-background-color-default","light-background-pressed":"--custom-background-color-pressed","light-background-disabled":"--custom-background-color-disabled","light-border-default":"--custom-border-color-default","light-border-pressed":"--custom-border-color-pressed","light-border-disabled":"--custom-border-color-disabled","dark-content-default":"--custom-content-color-default","dark-content-pressed":"--custom-content-color-pressed","dark-content-disabled":"--custom-content-color-disabled","dark-background-default":"--custom-background-color-default","dark-background-pressed":"--custom-background-color-pressed","dark-background-disabled":"--custom-background-color-disabled","dark-border-default":"--custom-border-color-default","dark-border-pressed":"--custom-border-color-pressed","dark-border-disabled":"--custom-border-color-disabled"}[i];if(T){if(i.startsWith("light-"))m.style.setProperty(T,o);else if(i.startsWith("dark-"))AppUtils.CSSInjector.inject("custom-dark-variable",`.dark { ${T}: ${o}; }`,"Dark 커스텀 변수");setTimeout(()=>{if(window.ButtonSystem&&window.ButtonSystem.StyleManager)window.ButtonSystem.StyleManager.scheduleUpdate()},100)}}},init(){console.log("\uD83C\uDFA8 [CustomPaletteManager] 초기화 시작"),this._initDOMCache(),console.log("  ├─ CustomColorPicker 초기화 중..."),this.CustomColorPicker.init(),console.log("  ✅ CustomColorPicker 초기화 완료"),setTimeout(()=>{this._updateDynamicDOMCache(),this.setupEventListeners(),this.generateAndApplyPalette()},500)},_initDOMCache(){this._domCache.resetBtn=document.querySelector(".palette-reset-btn"),this._domCache.testButtons=document.querySelectorAll(".button.custom"),this._domCache.lightInputs={},this._domCache.darkInputs={}},_updateDynamicDOMCache(){this._domCache.lightInputs={contentDefault:document.querySelector('[data-target="light-content-default"]')?.parentElement?.querySelector(".hex-input"),contentPressed:document.querySelector('[data-target="light-content-pressed"]')?.parentElement?.querySelector(".hex-input"),contentDisabled:document.querySelector('[data-target="light-content-disabled"]')?.parentElement?.querySelector(".hex-input"),backgroundDefault:document.querySelector('[data-target="light-background-default"]')?.parentElement?.querySelector(".hex-input"),backgroundPressed:document.querySelector('[data-target="light-background-pressed"]')?.parentElement?.querySelector(".hex-input"),backgroundDisabled:document.querySelector('[data-target="light-background-disabled"]')?.parentElement?.querySelector(".hex-input"),borderDefault:document.querySelector('[data-target="light-border-default"]')?.parentElement?.querySelector(".hex-input"),borderPressed:document.querySelector('[data-target="light-border-pressed"]')?.parentElement?.querySelector(".hex-input"),borderDisabled:document.querySelector('[data-target="light-border-disabled"]')?.parentElement?.querySelector(".hex-input")},this._domCache.darkInputs={contentDefault:document.querySelector('[data-target="dark-content-default"]')?.parentElement?.querySelector(".hex-input"),contentPressed:document.querySelector('[data-target="dark-content-pressed"]')?.parentElement?.querySelector(".hex-input"),contentDisabled:document.querySelector('[data-target="dark-content-disabled"]')?.parentElement?.querySelector(".hex-input"),backgroundDefault:document.querySelector('[data-target="dark-background-default"]')?.parentElement?.querySelector(".hex-input"),backgroundPressed:document.querySelector('[data-target="dark-background-pressed"]')?.parentElement?.querySelector(".hex-input"),backgroundDisabled:document.querySelector('[data-target="dark-background-disabled"]')?.parentElement?.querySelector(".hex-input"),borderDefault:document.querySelector('[data-target="dark-border-default"]')?.parentElement?.querySelector(".hex-input"),borderPressed:document.querySelector('[data-target="dark-border-pressed"]')?.parentElement?.querySelector(".hex-input"),borderDisabled:document.querySelector('[data-target="dark-border-disabled"]')?.parentElement?.querySelector(".hex-input")}},setupEventListeners(){if(Object.entries(this._domCache.lightInputs).forEach(([i,o])=>{if(o)o.addEventListener("input",()=>{this.generateAndApplyPalette()})}),Object.entries(this._domCache.darkInputs).forEach(([i,o])=>{if(o)o.addEventListener("input",()=>{this.generateAndApplyPalette()})}),document.querySelectorAll(".hex-input").forEach((i)=>{i.addEventListener("input",(o)=>{let m=o.target.previousElementSibling;if(m&&m.type==="color"){let E=o.target.value.replace("#","").substring(0,6);if(E.length===6)m.value="#"+E,this.updatePreview(),this.generateAndApplyPalette()}})}),document.querySelectorAll('input[type="color"]').forEach((i)=>{i.addEventListener("input",(o)=>{let m=o.target.nextElementSibling;if(m&&m.classList.contains("hex-input")){let E=o.target.id.includes("disabled")&&o.target.id.includes("background")?"00":"FF";m.value=o.target.value+E,this.generateAndApplyPalette()}})}),this._domCache.resetBtn)this._domCache.resetBtn.addEventListener("click",()=>{this.resetToDefaults()})},generateAndApplyPalette(){let i=document.documentElement;Object.entries({contentDefault:"--custom-content-color-default",contentPressed:"--custom-content-color-pressed",contentDisabled:"--custom-content-color-disabled",backgroundDefault:"--custom-background-color-default",backgroundPressed:"--custom-background-color-pressed",backgroundDisabled:"--custom-background-color-disabled",borderDefault:"--custom-border-color-default",borderPressed:"--custom-border-color-pressed",borderDisabled:"--custom-border-color-disabled"}).forEach(([T,L])=>{let M=this._domCache.lightInputs[T];if(M?.nextElementSibling?.value)i.style.setProperty(L,M.nextElementSibling.value)});let m={contentDefault:"--custom-content-color-default",contentPressed:"--custom-content-color-pressed",contentDisabled:"--custom-content-color-disabled",backgroundDefault:"--custom-background-color-default",backgroundPressed:"--custom-background-color-pressed",backgroundDisabled:"--custom-background-color-disabled",borderDefault:"--custom-border-color-default",borderPressed:"--custom-border-color-pressed",borderDisabled:"--custom-border-color-disabled"},E="";if(Object.entries(m).forEach(([T,L])=>{let M=this._domCache.darkInputs[T];if(M?.nextElementSibling?.value)E+=`  ${L}: ${M.nextElementSibling.value};
`}),E)AppUtils.CSSInjector.inject("custom-dark-theme",`.dark {
${E}}`,"Dark 테마 커스텀 변수");this.applyToTestButtons(),setTimeout(()=>{if(window.ButtonSystem&&window.ButtonSystem.StyleManager)window.ButtonSystem.StyleManager.scheduleUpdate()},200)},applyToTestButtons(){let i=this.CUSTOM_PALETTE_NAME;this._domCache.testButtons.forEach((o)=>{let m=Array.from(o.classList),E=["button","pressed","toggle","dynamic"],T=m.find((L)=>!E.includes(L));if(T&&T!==i)o.classList.remove(T);if(!o.classList.contains(i))o.classList.add(i)})},resetToDefaults(){this._updateDynamicDOMCache();let i=document.documentElement.classList.contains("dark"),E=i?{contentDefault:["rgba(0, 0, 0, 1)","#000000FF"],contentPressed:["rgba(255, 239, 128, 1)","#FFEF80FF"],contentDisabled:["rgba(255, 225, 0, 1)","#FFE100FF"],backgroundDefault:["rgba(255, 225, 0, 1)","#FFE100FF"],backgroundPressed:["rgba(36, 31, 0, 1)","#241F00FF"],backgroundDisabled:["transparent","transparent"],borderDefault:["rgba(255, 225, 0, 1)","#FFE100FF"],borderPressed:["rgba(255, 239, 128, 1)","#FFEF80FF"],borderDisabled:["rgba(255, 225, 0, 1)","#FFE100FF"]}:{contentDefault:["rgba(255, 255, 255, 1)","#FFFFFFFF"],contentPressed:["rgba(140, 83, 44, 1)","#8C532CFF"],contentDisabled:["rgba(140, 83, 44, 1)","#8C532CFF"],backgroundDefault:["rgba(164, 105, 63, 1)","#A4693FFF"],backgroundPressed:["rgba(238, 220, 210, 1)","#EEDCD2FF"],backgroundDisabled:["transparent","transparent"],borderDefault:["rgba(164, 105, 63, 1)","#A4693FFF"],borderPressed:["rgba(140, 83, 44, 1)","#8C532CFF"],borderDisabled:["rgba(140, 83, 44, 1)","#8C532CFF"]},T=i?this._domCache.darkInputs:this._domCache.lightInputs,L=i?"dark":"light";if(Object.entries(E).forEach(([M,[O,d]])=>{let _=T[M];if(_){_.value=d;let A=`${L}-${M.replace(/([A-Z])/g,"-$1").toLowerCase()}`,s=document.querySelector(`[data-target="${A}"]`);if(s){let f=s.querySelector(".color-display"),h=s.querySelector(".panel-hex-input");if(f)f.style.background=d;if(h)h.value=d}this.CustomColorPicker.updateCSSVariable(A,d),_.dispatchEvent(new Event("input",{bubbles:!0}))}}),this.reset3DSpheresToDefaults(),this.generateAndApplyPalette(),typeof ButtonSystem<"u"&&ButtonSystem.StyleManager)ButtonSystem.StyleManager.scheduleUpdate();requestAnimationFrame(()=>{document.querySelectorAll(".button.custom").forEach((O)=>{O.offsetHeight;let d=O.querySelector(".background.dynamic");if(d)d.offsetHeight})})},reset3DSpheresToDefaults(){document.querySelectorAll(".color-canvas-3d").forEach((i,o)=>{let m=i.closest(".custom-color-picker");if(!m)return;let E=m.dataset.target,T=m.querySelector(".panel-hex-input");if(T&&T.value){let L=T.value.replace("#","").toUpperCase();if(L.length===8&&/^[0-9A-F]{8}$/.test(L)){let M=parseInt(L.substr(0,2),16),O=parseInt(L.substr(2,2),16),d=parseInt(L.substr(4,2),16),_=Mechanics.colorToCoordinate("#"+L.substr(0,6));if(_){let A=Mechanics.sphericalToCartesian(1,_.theta,_.phi),s=[0,0,1],f=[s[1]*A[2]-s[2]*A[1],s[2]*A[0]-s[0]*A[2],s[0]*A[1]-s[1]*A[0]],h=s[0]*A[0]+s[1]*A[1]+s[2]*A[2],l=Math.acos(Math.max(-1,Math.min(1,h))),R=Mechanics.normalize(f),D=Mechanics.fromAxisAngle(R,l);setTimeout(()=>{Mechanics.animateToQuaternion(Mechanics.UnifiedSphereState,D,i)},o*100)}}}}),Mechanics.UnifiedSphereState.Q=[1,0,0,0],Mechanics.UnifiedSphereState.selectedColor=Topology.COORDINATE_SYSTEM.POLAR_COLORS.NORTH_POLE}};console.log("\uD83D\uDCE6 [index.js] ES6 모듈 로딩 시작");var hi=performance.now(),li=performance.now();console.log(`✅ [index.js] 모든 모듈 import 완료 (${(li-hi).toFixed(2)}ms)`);console.log("\uD83D\uDCE4 [index.js] window 객체로 export 시작...");window.ColorConverter=b;window.Topology=W;window.Mechanics=V;window.AppUtils={SVGLoader:v,CSSInjector:x};window.ButtonSystem=p;window.ThemeManager=r;window.LargeTextManager=a;window.SizeControlManager=e;window.CustomPaletteManager=J;window.ColorSphereUI=g;window.BUTTON_CONSTANTS=n;console.log("✅ [index.js] 전역 export 완료");console.log("\uD83D\uDCE5 [index.js] Chroma.js 로드 시작...");var Ri=async()=>{return new Promise((m,E)=>{let T=document.createElement("script");T.src="https://cdn.jsdelivr.net/npm/chroma-js@2.4.2/chroma.min.js",console.log("\uD83C\uDF10 [index.js] CDN에서 로드 시도:","https://cdn.jsdelivr.net/npm/chroma-js@2.4.2/chroma.min.js"),T.onload=()=>{console.log("✅ [index.js] CDN에서 Chroma.js 로드 성공"),m("cdn")},T.onerror=()=>{console.warn("⚠️ [index.js] CDN 로드 실패, 로컬 파일 시도...");let L=document.createElement("script");L.src="./src/lib/chroma.min.js",console.log("\uD83D\uDCBE [index.js] 로컬 캐시에서 로드 시도:","./src/lib/chroma.min.js"),L.onload=()=>{console.log("✅ [index.js] 로컬 캐시에서 Chroma.js 로드 성공"),m("local")},L.onerror=()=>{console.error("❌ [index.js] 로컬 파일도 로드 실패"),E(Error("Chroma.js 로드 실패 (CDN & 로컬 모두 실패)"))},document.head.appendChild(L)},document.head.appendChild(T)})};Ri().then(async(i)=>{let o=performance.now();console.log(`✅ [index.js] Chroma.js 로드 완료 (${i.toUpperCase()}) (${o.toFixed(2)}ms)`),console.log("\uD83D\uDD0D [index.js] chroma 버전:",window.chroma?.version||"unknown"),console.log("\uD83D\uDCE5 [index.js] app.js 로드 시작...");let m=performance.now();try{await Promise.resolve().then(() => (di(),fi));let E=performance.now();console.log(`✅ [index.js] app.js 로드 완료 (${(E-m).toFixed(2)}ms)`),console.log("\uD83C\uDF89 [index.js] 전체 시스템 로드 완료")}catch(E){throw console.error("❌ [index.js] app.js 로드 실패:",E),E}}).catch((i)=>{console.error("❌ [index.js] Chroma.js 로드 실패:",i),alert("Chroma.js 라이브러리를 로드할 수 없습니다.")});

//# debugId=FDC1EDD512D8A6A664756E2164756E21
