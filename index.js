var Ti=(i,o)=>()=>(i&&(o=i(i=0)),o);var hi={};var Ii,Hi,bi,fi,y,ii,oi,si,li,ti=async()=>{if(["#main-header","#main-content","#control-panel","#demo-area"].filter((t)=>!document.querySelector(t)).length>0);let s=document.createElement("div");document.body.appendChild(s);let l=getComputedStyle(s),T=["--primary1-background-color-default","--color-system-01","--font-family"].filter((t)=>!l.getPropertyValue(t));if(document.body.removeChild(s),T.length>0);try{ii.init(),oi.init(),si.init(),li.init(),await y.init()}catch(t){throw t}let E=!1;window.addEventListener("resize",()=>{if(E)return;E=!0,requestAnimationFrame(()=>{y.StyleManager.applyDynamicStyles(),E=!1})}),document.addEventListener("click",(t)=>{let d=t.target?.closest?.(".button");if(!d||d.getAttribute("aria-disabled")==="true"||d.dataset.isToggleButton!=="true")return;let f=d.classList.contains("pressed"),_=d.querySelector(".content.icon.pressed");if(f){if(_)_.style.display="none";requestAnimationFrame(()=>{if(d.classList.remove("pressed"),d.setAttribute("aria-pressed","false"),_)_.style.removeProperty("display")})}else{if(_)_.style.removeProperty("display");d.classList.add("pressed"),d.setAttribute("aria-pressed","true"),y.StyleManager.scheduleContrastUpdate()}},!1);let n=(t)=>{if(t.target?.closest?.('.button[aria-disabled="true"]')){if(t.preventDefault(),t.stopPropagation(),typeof t.stopImmediatePropagation==="function")t.stopImmediatePropagation();return!0}return!1};document.addEventListener("click",n,!0),document.addEventListener("keydown",(t)=>{if(t.target?.closest?.('.button[aria-disabled="true"]')&&(t.key===" "||t.key==="Enter"||t.key==="NumpadEnter")){t.preventDefault(),t.stopPropagation();return}let f=t.target?.closest?.(".button");if(f&&f.getAttribute("aria-disabled")!=="true"){if(t.key==="Enter"||t.key==="NumpadEnter"||t.key===" ")if(t.preventDefault(),t.stopPropagation(),f.classList.contains("toggle")){let h=new MouseEvent("click",{bubbles:!0,cancelable:!0,button:0});f.dispatchEvent(h)}else f.classList.add("pressed"),setTimeout(()=>{f.classList.remove("pressed");let h=new MouseEvent("click",{bubbles:!0,cancelable:!0,button:0});f.dispatchEvent(h)},100)}},!0),document.addEventListener("keydown",(t)=>{let d=document.activeElement,f=["ArrowDown","ArrowUp","ArrowRight","ArrowLeft","Home","End"].includes(t.key);if((!d||!d.classList.contains("button"))&&f){t.preventDefault();let L=document.querySelector(".button");if(L)L.focus();return}if(!d||!d.classList.contains("button"))return;let _=null,h=Array.from(document.querySelectorAll(".button")).filter((L)=>L.offsetParent!==null);switch(t.key){case"ArrowRight":t.preventDefault();let M=(h.indexOf(d)+1)%h.length;_=h[M];break;case"ArrowLeft":t.preventDefault();let O=h.indexOf(d),u=O===0?h.length-1:O-1;_=h[u];break;case"ArrowDown":t.preventDefault();let A=d.closest(".showcase"),C=h.indexOf(d);for(let $=1;$<h.length;$++){let c=(C+$)%h.length,R=h[c];if(R.closest(".showcase")!==A){_=R;break}}break;case"ArrowUp":t.preventDefault();let D=d.closest(".showcase"),g=h.indexOf(d);for(let $=1;$<h.length;$++){let c=(g-$+h.length)%h.length,U=h[c].closest(".showcase");if(U!==D){_=h.filter((W)=>W.closest(".showcase")===U)[0];break}}break;case"Home":t.preventDefault(),_=h[0];break;case"End":t.preventDefault(),_=h[h.length-1];break}if(_)_.focus()},!0),document.addEventListener("mousedown",(t)=>{let d=t.target?.closest?.(".button");if(d&&d.getAttribute("aria-disabled")!=="true"&&!d.classList.contains("toggle"))d.classList.add("pressed")},!0),document.addEventListener("mouseup",(t)=>{let d=t.target?.closest?.(".button");if(d&&d.classList.contains("pressed")&&!d.classList.contains("toggle"))d.classList.remove("pressed"),y.StyleManager.scheduleContrastUpdate()},!0),document.addEventListener("mouseleave",(t)=>{if(t.target&&typeof t.target.closest==="function"){let d=t.target?.closest?.(".button");if(d&&d.classList.contains("pressed")&&!d.classList.contains("toggle"))d.classList.remove("pressed"),y.StyleManager.scheduleUpdate()}},!0),document.addEventListener("touchstart",(t)=>{let d=t.target?.closest?.(".button");if(d&&d.getAttribute("aria-disabled")!=="true"&&!d.classList.contains("toggle"))d.classList.add("pressed")},{passive:!0}),document.addEventListener("touchend",(t)=>{let d=t.target?.closest?.(".button");if(d&&d.classList.contains("pressed")&&!d.classList.contains("toggle"))d.classList.remove("pressed"),y.StyleManager.scheduleContrastUpdate()},{passive:!0}),document.addEventListener("touchcancel",(t)=>{let d=t.target?.closest?.(".button");if(d&&d.classList.contains("pressed")&&!d.classList.contains("toggle"))d.classList.remove("pressed"),y.StyleManager.scheduleContrastUpdate()},{passive:!0}),window.AppUtils=fi,window.ButtonSystem=y,window.ThemeManager=ii,window.LargeTextManager=oi,window.SizeControlManager=si,window.CustomPaletteManager=li};var di=Ti(()=>{({ColorConverter:Ii,Topology:Hi,Mechanics:bi,AppUtils:fi,ButtonSystem:y,ThemeManager:ii,LargeTextManager:oi,SizeControlManager:si,CustomPaletteManager:li}=window);if(document.readyState==="loading")window.addEventListener("DOMContentLoaded",ti);else ti()});var X={rgbaToHex(i,o,s,l=255){return chroma.rgb(i,o,s).alpha(l/255).hex("rgba").toUpperCase()},rgba(i,o,s,l=255){return{r:i,g:o,b:s,a:l}},hexToRgba(i){let o=chroma(i),s=o.rgb();return{r:s[0],g:s[1],b:s[2],a:Math.round(o.alpha()*255)}},hsvToRgb(i,o,s){let l=chroma.hsv(i,o,s).rgb();return{r:l[0],g:l[1],b:l[2]}},hsvToHex(i,o,s,l=255){return chroma.hsv(i,o,s).alpha(l/255).hex("rgba").toUpperCase()},rgbToHsl(i,o,s){let l=chroma.rgb(i,o,s).hsl();return{h:Math.round(l[0]||0),s:Math.round(l[1]*100),l:Math.round(l[2]*100)}},hslToRgb(i,o,s){let l=chroma.hsl(i,o,s).rgb();return{r:l[0],g:l[1],b:l[2]}},hslToHex(i,o,s,l=255){return chroma.hsl(i,o,s).alpha(l/255).hex("rgba").toUpperCase()}};var N={COORDINATE_SYSTEM:{SPHERICAL:{NORTH_POLE:{theta:0,phi:0},SOUTH_POLE:{theta:Math.PI,phi:0},EQUATOR:{theta:Math.PI/2,phi:0}},CARTESIAN:{ORIGIN:{x:0,y:0,z:0},NORTH_POLE:{x:0,y:0,z:1},SOUTH_POLE:{x:0,y:0,z:-1}},POLAR_COLORS:{NORTH_POLE:{r:255,g:255,b:255},SOUTH_POLE:{r:0,g:0,b:0}},SCREEN:{CENTER:{x:0,y:0},UNIT_RADIUS:1}},calculateColor(i,o){let s=(o+Math.PI)/(2*Math.PI)*360,l=Math.floor(s/60)%6,m=s%60/60,T=()=>{switch(l){case 0:return{r:255,g:Math.round(m*255),b:0};case 1:return{r:Math.round((1-m)*255),g:255,b:0};case 2:return{r:0,g:255,b:Math.round(m*255)};case 3:return{r:0,g:Math.round((1-m)*255),b:255};case 4:return{r:Math.round(m*255),g:0,b:255};case 5:return{r:255,g:0,b:Math.round((1-m)*255)}}},E=i*180/Math.PI,n=E<90?1-(E-3)/84*0.5:0.5-(E-93)/84*0.5,{r:t,g:d,b:f}=T(),_=Math.sin(i),h=Math.round(n*255);return{r:Math.round(h+(t-h)*_),g:Math.round(h+(d-h)*_),b:Math.round(h+(f-h)*_)}},calculateColor2(i,o){let s=i*180/Math.PI,l=s<3||s>177,m=Math.abs(s-90)<3;if(l)return s<3?this.COORDINATE_SYSTEM.POLAR_COLORS.NORTH_POLE:this.COORDINATE_SYSTEM.POLAR_COLORS.SOUTH_POLE;let T=(o+Math.PI)/(2*Math.PI)*360,E=Math.floor(T/60)%6,n=T%60/60,t=()=>{switch(E){case 0:return{r:255,g:Math.round(n*255),b:0};case 1:return{r:Math.round((1-n)*255),g:255,b:0};case 2:return{r:0,g:255,b:Math.round(n*255)};case 3:return{r:0,g:Math.round((1-n)*255),b:255};case 4:return{r:Math.round(n*255),g:0,b:255};case 5:return{r:255,g:0,b:Math.round((1-n)*255)}}};if(m)return t();let d=s<90?1-(s-3)/84*0.5:0.5-(s-93)/84*0.5,{r:f,g:_,b:h}=t(),L=Math.sin(i),M=Math.round(d*255);return{r:Math.round(M+(f-M)*L),g:Math.round(M+(_-M)*L),b:Math.round(M+(h-M)*L)}}};var S={setupZoomSlider(i,o){let s=document.getElementById("zoom-slider"),l=document.querySelector(".zoom-value");if(!s||!l)return;s.addEventListener("input",(m)=>{i.zoom=parseFloat(m.target.value),window.Mechanics.RenderColorSphere(o.getContext("2d"),i),l.textContent=`${Math.round(i.zoom*100)}%`}),s.value=i.zoom,l.textContent=`${Math.round(i.zoom*100)}%`},setupColorInfoUpdate(i,o){let s=document.querySelector(".color-hex"),l=document.querySelector(".color-rgb"),m=document.querySelector(".color-hsl");if(!s||!l||!m)return;let T=()=>{let E=`#${i.selectedColor.r.toString(16).padStart(2,"0")}${i.selectedColor.g.toString(16).padStart(2,"0")}${i.selectedColor.b.toString(16).padStart(2,"0")}`.toUpperCase(),n=`rgb(${i.selectedColor.r}, ${i.selectedColor.g}, ${i.selectedColor.b})`,t=`hsl(${Math.round((i.selectedColor.r+i.selectedColor.g+i.selectedColor.b)/3*360/255)}, 50%, 50%)`;s.textContent=E,l.textContent=n,m.textContent=t};T(),setInterval(()=>{if(i.selectedColor)T()},100)}};var V={UnifiedSphereState:{dragging:!1,v0:null,Q:[1,0,0,0],last:[0,0],zoom:1,selectedColor:{r:0,g:0,b:0},isDragging:!1},initializeColorSphere(i="#color-sphere-canvas",o=null){let s=document.querySelector(i);if(!s)return;let l=s.getContext("2d");l.clearRect(0,0,s.width,s.height),this.RenderColorSphere(l,this.UnifiedSphereState),this.setupCanvasInteraction(s,this.UnifiedSphereState,o),S.setupZoomSlider(this.UnifiedSphereState,s),S.setupColorInfoUpdate(this.UnifiedSphereState,s)},cartesianToSpherical(i,o,s){let l=Math.sqrt(i*i+o*o+s*s);return{r:l,theta:Math.acos(Math.max(-1,Math.min(1,s/l))),phi:Math.atan2(o,i)}},sphericalToCartesian(i,o,s){return{x:i*Math.sin(o)*Math.cos(s),y:i*Math.sin(o)*Math.sin(s),z:i*Math.cos(o)}},screenToSphericalSurface(i,o,s){if(Math.sqrt(i*i+o*o)>s)return null;let l={x:i/s,y:o/s,z:Math.sqrt(s*s-i*i-o*o)/s};return{screen:{x:i,y:o},cartesian:l,spherical:this.cartesianToSpherical(l.x,l.y,l.z)}},mouseClickToSphericalCoordinates(i,o,s){let l=s.getBoundingClientRect();return this.screenToSphericalSurface(i-l.width/2,o-l.height/2,Math.min(l.width,l.height)/2)},colorToCoordinate(i){for(let o=0;o<=Math.PI;o+=0.05)for(let s=-Math.PI;s<=Math.PI;s+=0.05){let l=N.calculateColor(o,s);if(chroma.rgb(l.r,l.g,l.b).hex()===chroma(i).hex())return{theta:o,phi:s}}},normalize(i){let o=Math.sqrt(i.reduce((s,l)=>s+l*l,0));if(o===0)throw Error("영벡터는 정규화할 수 없습니다");return i.map((s)=>s/o)},fromAxisAngle(i,o){let s=Math.sin(o*0.5);return[i[0]*s,i[1]*s,i[2]*s,Math.cos(o*0.5)]},multiply(i,o){return[i[3]*o[0]+i[0]*o[3]+i[1]*o[2]-i[2]*o[1],i[3]*o[1]-i[0]*o[2]+i[1]*o[3]+i[2]*o[0],i[3]*o[2]+i[0]*o[1]-i[1]*o[0]+i[2]*o[3],i[3]*o[3]-i[0]*o[0]-i[1]*o[1]-i[2]*o[2]]},rotateVector(i,o){return this.multiply(this.multiply(i,[o[0],o[1],o[2],0]),[-i[0],-i[1],-i[2],i[3]]).slice(0,3)},slerp(i,o,s){let l=i[0]*o[0]+i[1]*o[1]+i[2]*o[2]+i[3]*o[3],m=Math.acos(Math.abs(l)),T=m*s,E=Math.sin(m),n=Math.cos(T)-l*Math.sin(T)/E,t=Math.sin(T)/E;return[n*i[0]+t*o[0],n*i[1]+t*o[1],n*i[2]+t*o[2],n*i[3]+t*o[3]]},fromDragRotation(i,o,s=0.005){return Math.sqrt(i*i+o*o)*s<0.000001?[1,0,0,0]:this.fromAxisAngle(this.normalize([o,-i,0]),Math.sqrt(i*i+o*o)*s)},fromClickRotation(i,o){return Math.sqrt(i*i+o*o)*Math.PI*0.5<0.000001?[1,0,0,0]:this.fromAxisAngle(this.normalize([o,-i,0]),Math.sqrt(i*i+o*o)*Math.PI*0.5)},RenderColorSphere(i,o){let s=i.canvas.width,l=i.canvas.height,m=s/2,T=l/2,E=(Math.min(s,l)/2-20)*o.zoom;i.clearRect(0,0,s,l);let n=i.createImageData(s,l),t=n.data;for(let d=0;d<l;d++)for(let f=0;f<s;f++){let _=f-m,h=d-T;if(_*_+h*h<=E*E){let L=_/E,M=h/E,O=Math.sqrt(Math.max(0,1-L*L-M*M)),u=this.rotateVector(o.Q,[L,M,O]),A=N.calculateColor(Math.acos(Math.max(-1,Math.min(1,u[2]))),Math.atan2(u[1],u[0])),C=(d*s+f)*4;t[C]=A.r,t[C+1]=A.g,t[C+2]=A.b,t[C+3]=255}}if(i.putImageData(n,0,0),o.selectedColor){let{r:d,g:f,b:_}=o.selectedColor;i.fillStyle=`rgb(${d}, ${f}, ${_})`,i.beginPath(),i.arc(m,T,4,0,2*Math.PI),i.fill();let h=d*0.299+f*0.587+_*0.114;i.strokeStyle=h>127?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",i.lineWidth=2,i.stroke()}},setupCanvasInteraction(i,o,s){let l=null,m=!1,T=i.getContext("2d");i.addEventListener("pointerdown",(E)=>{E.preventDefault(),E.stopPropagation(),o.dragging=!0,o.last=[E.clientX,E.clientY],o.isDragging=!0,l=[E.clientX,E.clientY],m=!1,i.setPointerCapture(E.pointerId),i.style.cursor="grabbing"},{passive:!1}),i.addEventListener("pointermove",(E)=>{if(!o.dragging)return;E.preventDefault(),E.stopPropagation();let n=E.clientX-o.last[0],t=E.clientY-o.last[1];if(o.last=[E.clientX,E.clientY],!m&&l){if(Math.hypot(E.clientX-l[0],E.clientY-l[1])>3)m=!0}let d=this.fromDragRotation(n,t,1/(0.45*Math.min(i.clientWidth,i.clientHeight)));if(d[0]!==1)o.Q=this.multiply(o.Q,d);if(s)s(i);this.RenderColorSphere(T,o)}),i.addEventListener("pointerup",(E)=>{E.preventDefault(),E.stopPropagation(),o.dragging=!1,o.isDragging=!1,i.releasePointerCapture(E.pointerId),i.style.cursor="grab",requestAnimationFrame(()=>{this.RenderColorSphere(T,o)})}),i.addEventListener("click",(E)=>{if(E.preventDefault(),E.stopPropagation(),!m){let n=i.getBoundingClientRect(),t=E.clientX-n.left,d=E.clientY-n.top,f=this.mouseClickToSphericalCoordinates(t,d,i);if(f){let _=[f.cartesian.x,f.cartesian.y,f.cartesian.z],h=[0,0,1],L=[h[1]*_[2]-h[2]*_[1],h[2]*_[0]-h[0]*_[2],h[0]*_[1]-h[1]*_[0]],M=Math.acos(Math.max(-1,Math.min(1,h[0]*_[0]+h[1]*_[1]+h[2]*_[2])));if(M>0.01)this.animateToQuaternion(o,this.fromAxisAngle(this.normalize(L),M),i)}}m=!1,l=null}),i.addEventListener("wheel",(E)=>{E.preventDefault(),E.stopPropagation();let n=i.closest(".custom-color-picker");if(!n)return;let t=n.querySelector(".panel-hex-input");if(!t)return;let d=t.value.replace("#","");if(d.length>=6){let f=d.length===8?parseInt(d.substr(6,2),16):255,_=E.deltaY>0?-4:4;f=Math.max(0,Math.min(255,f+_));let h=d.substr(0,6)+f.toString(16).padStart(2,"0").toUpperCase();t.value="#"+h,t.dispatchEvent(new Event("input",{bubbles:!0})),setTimeout(()=>{if(window.ButtonSystem&&window.ButtonSystem.StyleManager)window.ButtonSystem.StyleManager.scheduleUpdate()},100)}})},animateToQuaternion(i,o,s){let l=[...i.Q],m=performance.now(),T=s.getContext("2d"),E=(n)=>{let t=Math.min((n-m)/1000,1);if(i.Q=this.slerp(l,o,1-Math.pow(1-t,3)),this.RenderColorSphere(T,i),t<1)requestAnimationFrame(E)};requestAnimationFrame(E)}};var q={add:"add.svg","arrow-left":"arrow-left.svg","arrow-right":"arrow-right.svg",cancel:"cancel.svg",contrast:"contrast.svg",delete:"delete.svg",done:"done.svg",exit:"exit.svg",extention:"extention.svg",favicon:"favicon.svg",help:"help.svg",home:"home.svg",info:"info.svg",large:"large.svg",lowpos:"lowpos.svg",minus:"minus.svg",ok:"ok.svg",order:"order.svg",pay:"pay.svg",placeholder:"placeholder.svg",plus:"plus.svg",print:"print.svg",reset:"reset.svg",restart:"restart.svg","soldout-large":"soldout-large.svg","soldout-small":"soldout-small.svg",step:"step.svg",takein:"takein.svg",takeout:"takeout.svg",time:"time.svg",toggle:"toggle.svg",volume:"volume.svg",warning:"warning.svg"},_i={default:".content.icon:not(.pressed)",toggle:".content.icon.pressed",contrast:'[data-icon="contrast"]',large:'[data-icon="large"]'};function ni(i){return _i[i]||`[data-icon="${i}"]`}function G(i){let o=q[i];if(!o)return console.warn(`⚠️ Icon "${i}" not found in iconPaths, using placeholder`),"src/assets/icons/placeholder.svg";return`src/assets/icons/${o}`}function H(){let i={};for(let[o,s]of Object.entries(q)){if(o==="placeholder"&&i.default)continue;i[o]={path:G(o),selector:ni(o)}}return i}var b="placeholder";var r={cache:new Map,get iconMap(){return H()},convertToCurrentColor(i){return i.replace(/fill="(?!none|transparent)[^"]*"/gi,'fill="currentColor"').replace(/stroke="(?!none|transparent)[^"]*"/gi,'stroke="currentColor"').replace(/fill='(?!none|transparent)[^']*'/gi,"fill='currentColor'").replace(/stroke='(?!none|transparent)[^']*'/gi,"stroke='currentColor'").replace(/fill:\s*(?!none|transparent)[^;}\s]+/gi,"fill: currentColor").replace(/stroke:\s*(?!none|transparent)[^;}\s]+/gi,"stroke: currentColor")},async preloadAllIcons(){let i=Object.entries(this.iconMap).map(async([o,s])=>{try{let l=await fetch(s.path);if(!l.ok)throw Error(`SVG not found: ${s.path}`);let m=await l.text();this.cache.set(o,m),console.log(`✅ Loaded ${o} icon`)}catch(l){console.warn(`⚠️ Failed to load ${o} icon from ${s.path}, using fallback`);try{let m=G(b),T=await fetch(m);if(T.ok)this.cache.set(o,await T.text());else this.cache.set(o,"")}catch(m){console.error(`❌ Fallback also failed for ${o}`),this.cache.set(o,"")}}});await Promise.all(i)},injectAllIcons(){Object.entries(this.iconMap).forEach(([i,o])=>{let s=this.cache.get(i);if(!s){console.warn(`⚠️ No cached SVG for ${i}`);return}let l=this.convertToCurrentColor(s),m=document.querySelectorAll(o.selector);if(m.length===0)console.log(`ℹ️ No elements found for selector: ${o.selector}`);m.forEach((T)=>{T.innerHTML=l})}),console.log("✅ All icons injected to DOM (converted to currentColor)")},async loadAndInject(){await this.preloadAllIcons(),this.injectAllIcons()},getCached(i,o=!0){let s=this.cache.get(i)||"";return o?this.convertToCurrentColor(s):s}};var v={inject(i,o,s=""){let l=document.getElementById(i);if(l)l.remove();let m=document.createElement("style");m.id=i,m.textContent=o,document.head.appendChild(m)}};var B={BASE:0.03125,get BACKGROUND_BORDER_RADIUS(){return this.BASE},get BUTTON_BORDER_RADIUS(){return 2*this.BACKGROUND_BORDER_RADIUS},get BACKGROUND_OUTLINE_WIDTH(){return this.BASE},get BUTTON_PADDING(){return this.BACKGROUND_OUTLINE_WIDTH},get BUTTON_OUTLINE_WIDTH(){return 3*this.BACKGROUND_OUTLINE_WIDTH},get BUTTON_OUTLINE_OFFSET(){return-1*this.BACKGROUND_OUTLINE_WIDTH},get SELECTED_ICON_SIZE(){return 4*this.BASE}};var P={generateCSS(){let i=document.querySelectorAll(".button"),o=new Set;i.forEach((E)=>{let t=Array.from(E.classList).find((d)=>!["button","pressed","toggle","dynamic"].includes(d));if(t)o.add(t)});let s="",l="",m="";o.forEach((E)=>{let n=["primary1","primary2","primary3","secondary1","secondary2","secondary3","custom"].includes(E);if([{name:"default",selector:"",disabled:!1},{name:"pressed",selector:".pressed:not(.toggle)",disabled:!1},{name:"pressed",selector:".pressed.toggle",disabled:!1},{name:"disabled",selector:'[aria-disabled="true"]',disabled:!0}].forEach(({name:t,selector:d,disabled:f})=>{let _=E==="primary1"&&t==="default"&&!f?`&${d}`:null,h=`&.${E}${d}`;if(_)m+=`
    ${_} {
      & .background.dynamic {
        background: var(--${E}-background-color-${t});
        outline-color: var(--${E}-border-color-${t});
        outline-style: var(--border-style-default);
        
        & .content {
          color: var(--${E}-content-color-${t});
        }
      }
    }`;let L=E==="primary3"||E==="secondary3"?`var(--${E}-background1-color-${t})`:`var(--${E}-background-color-${t})`;m+=`
    ${h} {
      & .background.dynamic {
        background: ${L};
        outline-color: var(--${E}-border-color-${t});
        ${t==="default"?"outline-style: var(--border-style-default);":""}
        ${t==="pressed"?"outline-style: var(--border-style-pressed); outline-width: var(--border-style-pressed);":""}
        ${t==="disabled"?"outline-style: var(--border-style-disabled);":""}
        
        & .content {
          color: var(--${E}-content-color-${t});
        }
      }
      ${t==="pressed"?"&.toggle { & .content.icon.pressed { display: var(--content-icon-display-pressed-toggle); } }":""}
      ${f?"cursor: var(--button-cursor-disabled);":""}
    }`}),!n)["content-color-default","content-color-pressed","content-color-disabled","background-color-default","background-color-pressed","background-color-disabled","border-color-default","border-color-pressed","border-color-disabled"].forEach((d)=>{s+=`  --${E}-${d}: var(--custom-${d});
`,l+=`  --${E}-${d}: var(--custom-${d});
`})});let T=`
/* HTML 클래스 기반 수정자 시스템 - CSS 상속 활용 */
${s?`:root {
${s}}`:""}

${l?`.dark {
${l}}`:""}

@layer components {
  .button {${m}
  }
}
`;return window.AppUtils.CSSInjector.inject("palette-system-styles",T,"팔레트 시스템"),o}};var z={scheduleUpdate(){this.waitForRenderCompletion().then(()=>{this.updateButtonLabels()})},async waitForRenderCompletion(){return new Promise((i)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{setTimeout(()=>{i()},16)})})})},setupUpdateManager(){let i=new MutationObserver((o)=>{let s=!1;if(o.forEach((l)=>{let m=l.target;if(l.type==="attributes"&&l.attributeName==="class"){if(m.classList.contains("button"))s=!0}if(l.type==="attributes"&&l.attributeName==="style"){if(m===document.documentElement)s=!0}}),s)this.scheduleUpdate()});return document.querySelectorAll(".button").forEach((o)=>{i.observe(o,{attributes:!0,attributeFilter:["class"]})}),i.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}),i},calculateContrastRGBA(i,o,s,l,m,T){let E=(h,L,M)=>{let[O,u,A]=[h,L,M].map((C)=>{return C=C/255,C<=0.03928?C/12.92:Math.pow((C+0.055)/1.055,2.4)});return 0.2126*O+0.7152*u+0.0722*A},n=E(i,o,s),t=E(l,m,T),d=Math.max(n,t),f=Math.min(n,t);return(d+0.05)/(f+0.05)},calculateContrast(i,o){let s=(d)=>{if(!d||d==="transparent")throw Error("유효하지 않은 색상 값입니다");let f=d.match(/rgba?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)/);if(f)return[Math.round(parseFloat(f[1])),Math.round(parseFloat(f[2])),Math.round(parseFloat(f[3]))];if(d.startsWith("#")){let _=d.replace("#","");if(_.length>=6)return[parseInt(_.substr(0,2),16),parseInt(_.substr(2,2),16),parseInt(_.substr(4,2),16)]}throw Error(`색상 파싱 실패: ${d}`)},[l,m,T]=s(i),[E,n,t]=s(o);return this.calculateContrastRGBA(l,m,T,E,n,t)},updateButtonLabels(){document.querySelectorAll(".button").forEach((o)=>{let s=o.querySelector(".background.dynamic"),l=o.querySelector(".content"),m=o.querySelector(".content.label");if(s&&l&&m){s.offsetHeight,l.offsetHeight;let T=getComputedStyle(s),E=getComputedStyle(l),n=T.backgroundColor,t=E.color,f=this.calculateContrast(t,n).toFixed(2),_=m.innerHTML.split("<br>")[0];m.innerHTML=`${_}<br>${f}`}})},applyDynamicStyles(){let i=document.querySelectorAll(".button");if(i.length===0)return;let o=0;for(let s of i){let l=s.querySelector(".background");if(!l)continue;let m=s.getBoundingClientRect(),T=Math.min(m.width,m.height),E=T*window.ButtonSystem.CONSTANTS.BUTTON_PADDING,n=T*window.ButtonSystem.CONSTANTS.BUTTON_BORDER_RADIUS,t=T*window.ButtonSystem.CONSTANTS.BUTTON_OUTLINE_WIDTH,d=T*window.ButtonSystem.CONSTANTS.BUTTON_OUTLINE_OFFSET,f=T*window.ButtonSystem.CONSTANTS.BACKGROUND_BORDER_RADIUS,_=T*window.ButtonSystem.CONSTANTS.BACKGROUND_OUTLINE_WIDTH,h=T*window.ButtonSystem.CONSTANTS.SELECTED_ICON_SIZE,L=window.ButtonSystem.state.styleCache.get(s)||{};if(!((L.minSide||0)!==T||(L.buttonPadding||0)!==E||(L.buttonBorderRadius||0)!==n||(L.buttonOutlineWidth||0)!==t||(L.buttonOutlineOffset||0)!==d||(L.backgroundBorderRadius||0)!==f||(L.backgroundOutlineWidth||0)!==_||(L.iconSelectedSize||0)!==h))continue;s.style.padding=`${E}px`,s.style.borderRadius=`${n}px`,s.style.outlineWidth=`${t}px`,s.style.outlineOffset=`${d}px`,l.style.borderRadius=`${f}px`,l.style.outlineWidth=`${_}px`;let O=s.querySelector(".content.icon.pressed");if(O)O.style.width=`${h}px`,O.style.height=`${h}px`,O.style.top=`${E}px`,O.style.right=`${E}px`;window.ButtonSystem.state.styleCache.set(s,{minSide:T,buttonPadding:E,buttonBorderRadius:n,buttonOutlineWidth:t,buttonOutlineOffset:d,backgroundBorderRadius:f,backgroundOutlineWidth:_,iconSelectedSize:h}),o++}this.updateButtonLabels()},async setupIconInjection(){await this.waitForRenderCompletion();let i=document.querySelectorAll(".button");for(let o of i){let s=o.querySelector(".background");if(!s)continue;if(o.classList.contains("toggle")){let m=s.querySelector(".content.icon.pressed");if(!m){m=document.createElement("span"),m.className="content icon pressed";let T=s.querySelector(".content.icon:not(.pressed)");if(T&&T.parentNode)s.insertBefore(m,T);else s.insertBefore(m,s.firstChild)}}}for(let o of i){let s=o.classList.contains("toggle"),l=o.classList.contains("pressed");if(s)o.dataset.isToggleButton="true",o.setAttribute("aria-pressed",l?"true":"false")}},scheduleContrastUpdate(){this.scheduleUpdate()}};var p={CONSTANTS:B,state:{styleCache:new WeakMap},PaletteManager:P,StyleManager:z,async init(){console.log("\uD83D\uDD18 [ButtonSystem] 초기화 시작");let i=performance.now();console.log("  ├─ 1단계: SVG 로딩 및 DOM 주입");let o=performance.now();await window.AppUtils.SVGLoader.loadAndInject(),console.log(`  ✅ SVG 로딩 완료 (${(performance.now()-o).toFixed(2)}ms)`),console.log("  ├─ 2단계: 토글 버튼 구조 준비"),await this.StyleManager.setupIconInjection(),console.log("  ✅ 토글 버튼 준비 완료"),console.log("  ├─ 3단계: 팔레트 CSS 생성"),this.PaletteManager.generateCSS(),console.log("  ✅ 팔레트 CSS 생성 완료"),console.log("  ├─ 4단계: 동적 스타일 적용"),this.StyleManager.applyDynamicStyles(),console.log("  ✅ 동적 스타일 적용 완료"),console.log("  ├─ 5단계: 자동 업데이트 매니저 설정"),this.StyleManager.setupUpdateManager(),console.log("  ✅ 업데이트 매니저 설정 완료");let s=performance.now();console.log(`\uD83C\uDF89 [ButtonSystem] 초기화 완료 (총 ${(s-i).toFixed(2)}ms)`)}};var x={THEMES:{LIGHT:"light",DARK:"dark"},STORAGE_KEY:"theme-mode",MANUAL_MODE_KEY:"manual-theme-mode",_domCache:{html:null,toggleButton:null,toggleLabel:null,liveRegion:null},currentTheme:"light",isManualMode:!1,init(){console.log("\uD83C\uDFA8 [ThemeManager] 초기화 시작"),this._initDOMCache(),this.loadSettings(),console.log("  ├─ 현재 테마:",this.currentTheme,"| 수동 모드:",this.isManualMode),this.setupEventListeners(),this.applyCurrentState(),this.syncToggleButton(),console.log("✅ [ThemeManager] 초기화 완료")},_initDOMCache(){if(this._domCache.html=document.documentElement,this._domCache.html.classList.remove("no-js"),this._domCache.html.classList.add("js"),this._domCache.toggleButton=document.querySelector(".theme-toggle"),this._domCache.toggleButton)this._domCache.toggleLabel=this._domCache.toggleButton.querySelector(".label");this._domCache.liveRegion=document.getElementById("theme-announcer")},loadSettings(){let i=localStorage.getItem(this.STORAGE_KEY),o=localStorage.getItem(this.MANUAL_MODE_KEY);if(this.isManualMode=o==="true",this.isManualMode)this.currentTheme=i===this.THEMES.DARK?this.THEMES.DARK:this.THEMES.LIGHT;else this.currentTheme=this.THEMES.LIGHT},applyCurrentState(){let i=this._domCache.html;if(this.currentTheme===this.THEMES.DARK)i.classList.add("dark");else i.classList.remove("dark");if(this.isManualMode)i.classList.add("manual-theme-mode");else i.classList.remove("manual-theme-mode")},saveSettings(){localStorage.setItem(this.STORAGE_KEY,this.currentTheme),localStorage.setItem(this.MANUAL_MODE_KEY,this.isManualMode.toString())},syncToggleButton(){let i=this._domCache.toggleButton;if(i){let o=this.currentTheme===this.THEMES.DARK;i.setAttribute("aria-pressed",o.toString());let s=this._domCache.toggleLabel;if(s)s.innerHTML=o?"Light<br>테마":"Dark<br>테마"}},toggle(){this.currentTheme=this.currentTheme===this.THEMES.LIGHT?this.THEMES.DARK:this.THEMES.LIGHT,this.isManualMode=!0,this.applyCurrentState(),this.saveSettings(),this.syncToggleButton(),this.announceChange()},announceChange(){let o=`${this.currentTheme===this.THEMES.DARK?"Dark 테마":"Light 테마"}로 전환되었습니다.`,s=this._domCache.liveRegion;if(!s)s=document.createElement("div"),s.id="theme-announcer",s.setAttribute("aria-live","polite"),s.setAttribute("aria-atomic","true"),s.style.position="absolute",s.style.left="-10000px",s.style.width="1px",s.style.height="1px",s.style.overflow="hidden",document.body.appendChild(s),this._domCache.liveRegion=s;s.textContent=o},setupEventListeners(){let i=document.querySelector(".theme-toggle");if(i)i.addEventListener("click",()=>this.toggle());document.addEventListener("keydown",(o)=>{if(o.ctrlKey&&o.altKey&&o.key.toLowerCase()==="h")o.preventDefault(),this.toggle()})}};var e={MODES:{DEFAULT:"default",LARGE:"large"},STORAGE_KEY:"large-mode",_domCache:{html:null,toggleButton:null,toggleLabel:null,liveRegion:null},currentMode:"default",init(){console.log("\uD83D\uDCCF [LargeTextManager] 초기화 시작"),this._initDOMCache(),this.loadSettings(),console.log("  ├─ 현재 모드:",this.currentMode),this.setupEventListeners(),this.applyCurrentState(),this.syncToggleButton(),console.log("✅ [LargeTextManager] 초기화 완료")},_initDOMCache(){if(this._domCache.html=document.documentElement,this._domCache.toggleButton=document.querySelector(".large-toggle"),this._domCache.toggleButton)this._domCache.toggleLabel=this._domCache.toggleButton.querySelector(".label");this._domCache.liveRegion=document.getElementById("large-announcer")},loadSettings(){let i=localStorage.getItem(this.STORAGE_KEY);this.currentMode=i===this.MODES.LARGE?this.MODES.LARGE:this.MODES.DEFAULT},applyCurrentState(){let i=this._domCache.html;if(this.currentMode===this.MODES.LARGE)i.classList.add("large");else i.classList.remove("large")},saveSettings(){localStorage.setItem(this.STORAGE_KEY,this.currentMode)},syncToggleButton(){let i=this._domCache.toggleButton;if(i){let o=this.currentMode===this.MODES.LARGE;i.setAttribute("aria-pressed",o.toString());let s=this._domCache.toggleLabel;if(s)s.innerHTML=o?"기본<br>글씨":"큰글씨<br>모드"}},toggle(){this.currentMode=this.currentMode===this.MODES.DEFAULT?this.MODES.LARGE:this.MODES.DEFAULT,this.applyCurrentState(),this.saveSettings(),this.syncToggleButton(),this.announceChange()},announceChange(){let o=`${this.currentMode===this.MODES.LARGE?"큰글씨 모드":"기본 글씨 크기"}로 전환되었습니다.`,s=this._domCache.liveRegion;if(!s)s=document.createElement("div"),s.id="large-announcer",s.setAttribute("aria-live","polite"),s.setAttribute("aria-atomic","true"),s.style.position="absolute",s.style.left="-10000px",s.style.width="1px",s.style.height="1px",s.style.overflow="hidden",document.body.appendChild(s),this._domCache.liveRegion=s;s.textContent=o},setupEventListeners(){let i=document.querySelector(".large-toggle");if(i)i.addEventListener("click",()=>this.toggle());document.addEventListener("keydown",(o)=>{if(o.ctrlKey&&o.altKey&&o.key.toLowerCase()==="l")o.preventDefault(),this.toggle()})}};var a={DEFAULT_WIDTH:256,DEFAULT_HEIGHT:256,_domCache:{widthSlider:null,heightSlider:null,widthValue:null,heightValue:null,resetButton:null,allButtons:null},currentWidth:256,currentHeight:256,init(){console.log("\uD83D\uDCD0 [SizeControlManager] 초기화 시작"),this._initDOMCache(),this.setupEventListeners(),this.updateDisplay(),console.log("  ├─ 기본 크기:",`${this.currentWidth}x${this.currentHeight}px`),console.log("✅ [SizeControlManager] 초기화 완료")},_initDOMCache(){this._domCache.widthSlider=document.querySelector(".button-width"),this._domCache.heightSlider=document.querySelector(".button-height"),this._domCache.widthValue=document.querySelector(".width-value"),this._domCache.heightValue=document.querySelector(".height-value"),this._domCache.resetButton=document.querySelector(".scaling.reset"),this._domCache.allButtons=document.querySelectorAll(".button")},setupEventListeners(){if(this._domCache.widthSlider)this._domCache.widthSlider.addEventListener("input",(i)=>{this.currentWidth=parseInt(i.target.value),this.updateButtonSizes(),this.updateDisplay()});if(this._domCache.heightSlider)this._domCache.heightSlider.addEventListener("input",(i)=>{this.currentHeight=parseInt(i.target.value),this.updateButtonSizes(),this.updateDisplay()});if(this._domCache.resetButton)this._domCache.resetButton.addEventListener("click",()=>{this.resetToDefault()})},updateButtonSizes(){if(this._domCache.allButtons.forEach((i)=>{i.style.width=`${this.currentWidth}px`,i.style.height=`${this.currentHeight}px`}),typeof ButtonSystem<"u"&&ButtonSystem.StyleManager)requestAnimationFrame(()=>{ButtonSystem.StyleManager.applyDynamicStyles()})},updateDisplay(){if(this._domCache.widthValue)this._domCache.widthValue.textContent=`${this.currentWidth}px`;if(this._domCache.heightValue)this._domCache.heightValue.textContent=`${this.currentHeight}px`},resetToDefault(){if(this.currentWidth=this.DEFAULT_WIDTH,this.currentHeight=this.DEFAULT_HEIGHT,this._domCache.widthSlider)this._domCache.widthSlider.value=this.currentWidth;if(this._domCache.heightSlider)this._domCache.heightSlider.value=this.currentHeight;this.updateButtonSizes(),this.updateDisplay()}};var F={CUSTOM_PALETTE_NAME:"custom",_domCache:{lightInputs:{},darkInputs:{},resetBtn:null,testButtons:null},currentPalette:{name:"custom"},CustomColorPicker:{get sphereState(){return Mechanics.UnifiedSphereState},init(){console.log("  ├─ [CustomColorPicker] 초기화 시작"),this.generateLightThemePickers(),console.log("    ✅ Light 테마 피커 생성"),this.generateDarkThemePickers(),console.log("    ✅ Dark 테마 피커 생성"),this.setupColorDisplays(),console.log("    ✅ 컬러 디스플레이 설정"),this.setup3DCanvasInteraction(),console.log("    ✅ 3D 캔버스 인터랙션 설정"),this.setupHexInputs(),console.log("    ✅ Hex 입력 설정")},generateLightThemePickers(){let i=document.getElementById("light-color-pickers");if(!i){console.warn("⚠️ [CustomColorPicker] light-color-pickers 요소를 찾을 수 없음");return}console.log("    ├─ light-color-pickers 찾음:",i),[{id:"light-content-default",label:"콘텐츠(기본)",color:"rgba(255, 255, 255, 1)",hex:"#FFFFFFFF",hue:0,alpha:255},{id:"light-content-pressed",label:"콘텐츠(눌림)",color:"rgba(140, 83, 44, 1)",hex:"#8C532CFF",hue:25,alpha:255},{id:"light-content-disabled",label:"콘텐츠(비활성)",color:"rgba(140, 83, 44, 1)",hex:"#8C532CFF",hue:25,alpha:255},{id:"light-background-default",label:"배경(기본)",color:"rgba(164, 105, 63, 1)",hex:"#A4693FFF",hue:25,alpha:255},{id:"light-background-pressed",label:"배경(눌림)",color:"rgba(238, 220, 210, 1)",hex:"#EEDCD2FF",hue:25,alpha:255},{id:"light-background-disabled",label:"배경(비활성)",color:"transparent",hex:"#00000000",hue:0,alpha:0},{id:"light-border-default",label:"테두리(기본)",color:"rgba(164, 105, 63, 1)",hex:"#A4693FFF",hue:25,alpha:255},{id:"light-border-pressed",label:"테두리(눌림)",color:"rgba(140, 83, 44, 1)",hex:"#8C532CFF",hue:25,alpha:255},{id:"light-border-disabled",label:"테두리(비활성)",color:"rgba(140, 83, 44, 1)",hex:"#8C532CFF",hue:25,alpha:255}].forEach((s)=>{let l=`
            <div class="palette-input-group">
              <label for="${s.id}">${s.label}:</label>
              <div class="custom-color-picker" data-target="${s.id}">
                <div class="color-display" style="background: ${s.color}"></div>
                <div class="color-picker-panel">
                  <!-- 색상구체 캔버스 -->
                  <canvas id="color-sphere-canvas" class="color-canvas-3d" width="400" height="400" aria-label="3D 색상 구체 선택기"></canvas>
                  
                  <!-- 색상 정보 표시 -->
                  <section class="color-info">
                    <div class="picker-color-display">
                      <h3>선택된 색상</h3>
                      <div class="picker-color-preview-container">
                        <div class="picker-color-preview" id="selected-color-preview"></div>
                        <div class="picker-color-details">
                        <p>HEX: <span id="selected-color-hex">#FFFFFF</span></p>
                        <p>RGB: <span id="selected-color-rgb">rgb(255, 255, 255)</span></p>
                        <p>HSL: <span id="selected-color-hsl">hsl(0, 0%, 100%)</span></p>
                    </div>
                  </div>
                    </div>
                    
                    <!-- 확대/축소 컨트롤 -->
                    <div class="picker-zoom-controls">
                      <h3>구체 크기 조절</h3>
                      <div class="scaling zoom">
                        <label for="zoom-slider">확대/축소:</label>
                        <input 
                          type="range" 
                          id="zoom-slider" 
                          min="0.1" 
                          max="3.0" 
                          step="0.1" 
                          value="1.0"
                          aria-label="색상 구체 확대/축소 (10% ~ 300%)"
                        >
                        <span class="size value zoom-value">100%</span>
                      </div>
                    </div>
                    
                    <!-- 색상 코드 입력 -->
                  <div class="picker-color-input-group">
                    <label>색상 코드</label>
                    <input type="text" class="panel-hex-input" value="${s.hex}" maxlength="9" placeholder="#RRGGBBAA">
                  </div>
                    
                    <!-- 구체 정보 -->
                    <div class="picker-sphere-info">
                      <small>\uD83C\uDF10 3D 색상 구체 | 드래그: 회전 | 휠: 알파 조절</small>
                    </div>
                  </section>
                </div>
              </div>
              <input type="text" class="hex-input" value="${s.hex}">
            </div>
          `;i.innerHTML+=l})},generateDarkThemePickers(){let i=document.getElementById("dark-color-pickers");if(!i)return;[{id:"dark-content-default",label:"콘텐츠(기본)",color:"rgba(0, 0, 0, 1)",hex:"#000000FF",hue:0,alpha:255},{id:"dark-content-pressed",label:"콘텐츠(눌림)",color:"rgba(255, 239, 128, 1)",hex:"#FFEF80FF",hue:54,alpha:255},{id:"dark-content-disabled",label:"콘텐츠(비활성)",color:"rgba(255, 225, 0, 1)",hex:"#FFE100FF",hue:54,alpha:255},{id:"dark-background-default",label:"배경(기본)",color:"rgba(255, 225, 0, 1)",hex:"#FFE100FF",hue:54,alpha:255},{id:"dark-background-pressed",label:"배경(눌림)",color:"rgba(36, 31, 0, 1)",hex:"#241F00FF",hue:54,alpha:255},{id:"dark-background-disabled",label:"배경(비활성)",color:"transparent",hex:"#00000000",hue:0,alpha:0},{id:"dark-border-default",label:"테두리(기본)",color:"rgba(255, 225, 0, 1)",hex:"#FFE100FF",hue:54,alpha:255},{id:"dark-border-pressed",label:"테두리(눌림)",color:"rgba(255, 239, 128, 1)",hex:"#FFEF80FF",hue:54,alpha:255},{id:"dark-border-disabled",label:"테두리(비활성)",color:"rgba(255, 225, 0, 1)",hex:"#FFE100FF",hue:54,alpha:255}].forEach((s)=>{let l=`
            <div class="palette-input-group">
              <label for="${s.id}">${s.label}:</label>
              <div class="custom-color-picker" data-target="${s.id}">
                <div class="color-display" style="background: ${s.color}"></div>
                <div class="color-picker-panel">
                  <!-- 색상구체 캔버스 -->
                  <canvas id="color-sphere-canvas" class="color-canvas-3d" width="400" height="400" aria-label="3D 색상 구체 선택기"></canvas>
                  
                  <!-- 색상 정보 표시 -->
                  <section class="color-info">
                    <div class="picker-color-display">
                      <h3>선택된 색상</h3>
                      <div class="picker-color-preview-container">
                        <div class="picker-color-preview" id="selected-color-preview"></div>
                        <div class="picker-color-details">
                        <p>HEX: <span id="selected-color-hex">#FFFFFF</span></p>
                        <p>RGB: <span id="selected-color-rgb">rgb(255, 255, 255)</span></p>
                        <p>HSL: <span id="selected-color-hsl">hsl(0, 0%, 100%)</span></p>
                    </div>
                  </div>
                    </div>
                    
                    <!-- 확대/축소 컨트롤 -->
                    <div class="picker-zoom-controls">
                      <h3>구체 크기 조절</h3>
                      <div class="scaling zoom">
                        <label for="zoom-slider">확대/축소:</label>
                        <input 
                          type="range" 
                          id="zoom-slider" 
                          min="0.1" 
                          max="3.0" 
                          step="0.1" 
                          value="1.0"
                          aria-label="색상 구체 확대/축소 (10% ~ 300%)"
                        >
                        <span class="size value zoom-value">100%</span>
                      </div>
                    </div>
                    
                    <!-- 색상 코드 입력 -->
                  <div class="picker-color-input-group">
                    <label>색상 코드</label>
                    <input type="text" class="panel-hex-input" value="${s.hex}" maxlength="9" placeholder="#RRGGBBAA">
                  </div>
                    
                    <!-- 구체 정보 -->
                    <div class="picker-sphere-info">
                      <small>\uD83C\uDF10 3D 색상 구체 | 드래그: 회전 | 휠: 알파 조절</small>
                    </div>
                  </section>
                </div>
              </div>
              <input type="text" class="hex-input" value="${s.hex}">
            </div>
          `;i.innerHTML+=l})},setupColorDisplays(){document.querySelectorAll(".color-display").forEach((i)=>{i.addEventListener("click",(o)=>{let s=o.target.closest(".custom-color-picker"),l=s.querySelector(".color-picker-panel");if(document.querySelectorAll(".color-picker-panel").forEach((m)=>m.classList.remove("active")),l.classList.toggle("active"),l.classList.contains("active")){this.initialize3DCanvas(s);let m=s.parentElement.querySelector(".hex-input");if(m&&m.value){let T=m.value.replace("#","").toUpperCase();if(T.length===8&&/^[0-9A-F]{8}$/.test(T)){let E=parseInt(T.substr(0,2),16),n=parseInt(T.substr(2,2),16),t=parseInt(T.substr(4,2),16)}}}})}),document.addEventListener("click",(i)=>{if(!i.target.closest(".custom-color-picker"))document.querySelectorAll(".color-picker-panel").forEach((o)=>{o.classList.remove("active")})})},initialize3DCanvas(i){let o=i.querySelector(".color-canvas-3d");if(o){let s=o.getContext("2d");s.clearRect(0,0,o.width,o.height),Mechanics.RenderColorSphere(s,Mechanics.UnifiedSphereState),Mechanics.setupCanvasInteraction(o,Mechanics.UnifiedSphereState,(l)=>this.updateCenterColorRealtime(l))}},setup3DCanvasInteraction(){let i=(l)=>{Mechanics.setupCanvasInteraction(l,Mechanics.UnifiedSphereState,(m)=>this.updateCenterColorRealtime(m))},o=(l,m)=>{let T=m.getBoundingClientRect(),E=l.clientX-T.left,n=l.clientY-T.top,t=T.width/2,d=T.height/2,f=(Math.min(T.width,T.height)/2-20)*this.sphereState.zoom,_=E-t,h=n-d,L=Math.sqrt(_*_+h*h);if(L<=f){let M=_/f,O=h/f,u=Math.sqrt(Math.max(0,1-M*M-O*O)),A=Mechanics.rotateVector(Mechanics.UnifiedSphereState.Q,[M,O,u]),[C,D,g]=A,$=Math.atan2(D,C),c=Math.acos(Math.max(-1,Math.min(1,g))),R=($+Math.PI)/(2*Math.PI)*360;if(R>=360)R=0;let U=L/f,mi=(Math.PI-c)/Math.PI,W=Topology.calculateColor(c,$),{r:K,g:j,b:J}=W;Mechanics.UnifiedSphereState.selectedColor={r:K,g:j,b:J,hue:R};let Y=m.closest(".custom-color-picker"),Ei=Y.dataset.target,Z=Y.querySelector(".panel-hex-input"),w=255;if(Z&&Z.value){let k=Z.value.replace("#","");if(k.length===8)w=parseInt(k.substr(6,2),16)}let Q={r:K,g:j,b:J},I=ColorConverter.rgbaToHex(K,j,J,w);this.updateColorInputs(Ei,Q,w,I),this.updateSelectedColorInfo(Q,w,I),this.updateSelectedColorInfo(Q,w,I)}};this.selectColorAt3D=o,this.updateCenterColorRealtime=(l)=>{let n=Mechanics.rotateVector(Mechanics.UnifiedSphereState.Q,[0,0,1]),[t,d,f]=n,_=Math.atan2(d,t),h=Math.acos(Math.max(-1,Math.min(1,f))),L=Topology.calculateColor(h,_),{r:M,g:O,b:u}=L;Mechanics.UnifiedSphereState.selectedColor={r:M,g:O,b:u};let A=l.closest(".custom-color-picker");if(!A)return;let C=A.dataset.target,D=A.querySelector(".panel-hex-input"),g=255;if(D&&D.value){let R=D.value.replace("#","");if(R.length===8)g=parseInt(R.substr(6,2),16)}let $={r:M,g:O,b:u},c=ColorConverter.rgbaToHex(M,O,u,g);requestAnimationFrame(()=>{this.updateColorInputs(C,$,g,c),this.updateSelectedColorInfo($,g,c),this.updateSelectedColorInfo($,g,c)})};let s=(l,m)=>{let T=m.getBoundingClientRect(),E=l.clientX-T.left,n=l.clientY-T.top,t=Math.max(0,Math.min(100,E/T.width*100)),d=Math.max(0,Math.min(100,(1-n/T.height)*100)),f=m.closest(".custom-color-picker"),_=f.querySelector(".hue-slider"),h=f.querySelector(".alpha-slider"),L=f.dataset.target,M=parseInt(_?.value||0),O=parseInt(h?.value||255),u=ColorConverter.hsvToRgb(M,t,d),A=ColorConverter.rgbaToHex(u.r,u.g,u.b,O);this.updateColorInputs(L,u,O,A),this.updateSelectedColorInfo(u,O,A)};document.querySelectorAll(".color-canvas-3d").forEach((l)=>{i(l),l.addEventListener("wheel",(m)=>{m.preventDefault(),m.stopPropagation();let T=l.closest(".custom-color-picker"),E=T.querySelector(".panel-hex-input");if(E){let n=E.value.replace("#",""),t=255;if(!n||n.length<6)throw Error("유효하지 않은 헥스 색상입니다");if(n.length===8)t=parseInt(n.substr(6,2),16);else if(n.length===6)t=255;let d=m.deltaY>0?-4:4,f=Math.max(0,Math.min(255,t+d));if(n.length>=6){let _=n.substr(0,6),h="#"+_+f.toString(16).padStart(2,"0").toUpperCase(),L=T.dataset.target,M=parseInt(_.substr(0,2),16),O=parseInt(_.substr(2,2),16),u=parseInt(_.substr(4,2),16);this.updateColorInputs(L,{r:M,g:O,b:u},f,h),setTimeout(()=>{if(window.ButtonSystem&&window.ButtonSystem.StyleManager)window.ButtonSystem.StyleManager.scheduleUpdate()},100)}}})})},setupHexInputs(){document.querySelectorAll(".panel-hex-input").forEach((i)=>{i.addEventListener("input",(o)=>{let s=o.target.value.replace("#","").toUpperCase();if(s.length===8&&/^[0-9A-F]{8}$/.test(s)){let l=parseInt(s.substr(0,2),16),m=parseInt(s.substr(2,2),16),T=parseInt(s.substr(4,2),16),E=parseInt(s.substr(6,2),16),n=o.target.closest(".custom-color-picker"),t=n.dataset.target,d="#"+s,f=n.querySelector(".color-canvas-3d");if(f){let _=f.getContext("2d");Mechanics.RenderColorSphere(_,f.className)}this.updateColorInputs(t,{r:l,g:m,b:T},E,d),this.updateSelectedColorInfo({r:l,g:m,b:T},E,d)}})})},updateSelectedColorInfo(i,o,s){document.querySelectorAll(".color-picker-panel .picker-color-preview").forEach((n)=>{n.style.background=s});let l=document.getElementById("selected-color-preview");if(l)l.style.background=s;document.querySelectorAll(".color-picker-panel #selected-color-hex").forEach((n)=>{n.textContent=s}),document.querySelectorAll(".color-picker-panel #selected-color-rgb").forEach((n)=>{n.textContent=`rgb(${i.r}, ${i.g}, ${i.b})`}),document.querySelectorAll(".color-picker-panel #selected-color-hsl").forEach((n)=>{let t=ColorConverter.rgbToHsl(i.r,i.g,i.b);n.textContent=`hsl(${Math.round(t.h)}, ${Math.round(t.s)}%, ${Math.round(t.l)}%)`});let m=document.getElementById("selected-color-hex"),T=document.getElementById("selected-color-rgb"),E=document.getElementById("selected-color-hsl");if(m)m.textContent=s;if(T)T.textContent=`rgb(${i.r}, ${i.g}, ${i.b})`;if(E){let n=ColorConverter.rgbToHsl(i.r,i.g,i.b);E.textContent=`hsl(${Math.round(n.h)}, ${Math.round(n.s)}%, ${Math.round(n.l)}%)`}},updateColorInputs(i,o,s,l){let m=document.querySelector(`[data-target="${i}"]`),T=m?.parentElement?.querySelector(".hex-input"),E=m?.querySelector(".panel-hex-input"),n=m?.querySelector(".color-display");if(T)T.value=l;if(E)E.value=l;if(n)n.style.background=l;if(this.updateCSSVariable(i,l),typeof F<"u")F.generateAndApplyPalette()},updateCSSVariable(i,o){let s=document.documentElement,m={"light-content-default":"--custom-content-color-default","light-content-pressed":"--custom-content-color-pressed","light-content-disabled":"--custom-content-color-disabled","light-background-default":"--custom-background-color-default","light-background-pressed":"--custom-background-color-pressed","light-background-disabled":"--custom-background-color-disabled","light-border-default":"--custom-border-color-default","light-border-pressed":"--custom-border-color-pressed","light-border-disabled":"--custom-border-color-disabled","dark-content-default":"--custom-content-color-default","dark-content-pressed":"--custom-content-color-pressed","dark-content-disabled":"--custom-content-color-disabled","dark-background-default":"--custom-background-color-default","dark-background-pressed":"--custom-background-color-pressed","dark-background-disabled":"--custom-background-color-disabled","dark-border-default":"--custom-border-color-default","dark-border-pressed":"--custom-border-color-pressed","dark-border-disabled":"--custom-border-color-disabled"}[i];if(m){if(i.startsWith("light-"))s.style.setProperty(m,o);else if(i.startsWith("dark-"))AppUtils.CSSInjector.inject("custom-dark-variable",`.dark { ${m}: ${o}; }`,"Dark 커스텀 변수");setTimeout(()=>{if(window.ButtonSystem&&window.ButtonSystem.StyleManager)window.ButtonSystem.StyleManager.scheduleUpdate()},100)}}},init(){console.log("\uD83C\uDFA8 [CustomPaletteManager] 초기화 시작"),this._initDOMCache(),console.log("  ├─ CustomColorPicker 초기화 중..."),this.CustomColorPicker.init(),console.log("  ✅ CustomColorPicker 초기화 완료"),setTimeout(()=>{this._updateDynamicDOMCache(),this.setupEventListeners(),this.generateAndApplyPalette()},500)},_initDOMCache(){this._domCache.resetBtn=document.querySelector(".palette-reset-btn"),this._domCache.testButtons=document.querySelectorAll(".button.custom"),this._domCache.lightInputs={},this._domCache.darkInputs={}},_updateDynamicDOMCache(){this._domCache.lightInputs={contentDefault:document.querySelector('[data-target="light-content-default"]')?.parentElement?.querySelector(".hex-input"),contentPressed:document.querySelector('[data-target="light-content-pressed"]')?.parentElement?.querySelector(".hex-input"),contentDisabled:document.querySelector('[data-target="light-content-disabled"]')?.parentElement?.querySelector(".hex-input"),backgroundDefault:document.querySelector('[data-target="light-background-default"]')?.parentElement?.querySelector(".hex-input"),backgroundPressed:document.querySelector('[data-target="light-background-pressed"]')?.parentElement?.querySelector(".hex-input"),backgroundDisabled:document.querySelector('[data-target="light-background-disabled"]')?.parentElement?.querySelector(".hex-input"),borderDefault:document.querySelector('[data-target="light-border-default"]')?.parentElement?.querySelector(".hex-input"),borderPressed:document.querySelector('[data-target="light-border-pressed"]')?.parentElement?.querySelector(".hex-input"),borderDisabled:document.querySelector('[data-target="light-border-disabled"]')?.parentElement?.querySelector(".hex-input")},this._domCache.darkInputs={contentDefault:document.querySelector('[data-target="dark-content-default"]')?.parentElement?.querySelector(".hex-input"),contentPressed:document.querySelector('[data-target="dark-content-pressed"]')?.parentElement?.querySelector(".hex-input"),contentDisabled:document.querySelector('[data-target="dark-content-disabled"]')?.parentElement?.querySelector(".hex-input"),backgroundDefault:document.querySelector('[data-target="dark-background-default"]')?.parentElement?.querySelector(".hex-input"),backgroundPressed:document.querySelector('[data-target="dark-background-pressed"]')?.parentElement?.querySelector(".hex-input"),backgroundDisabled:document.querySelector('[data-target="dark-background-disabled"]')?.parentElement?.querySelector(".hex-input"),borderDefault:document.querySelector('[data-target="dark-border-default"]')?.parentElement?.querySelector(".hex-input"),borderPressed:document.querySelector('[data-target="dark-border-pressed"]')?.parentElement?.querySelector(".hex-input"),borderDisabled:document.querySelector('[data-target="dark-border-disabled"]')?.parentElement?.querySelector(".hex-input")}},setupEventListeners(){if(Object.entries(this._domCache.lightInputs).forEach(([i,o])=>{if(o)o.addEventListener("input",()=>{this.generateAndApplyPalette()})}),Object.entries(this._domCache.darkInputs).forEach(([i,o])=>{if(o)o.addEventListener("input",()=>{this.generateAndApplyPalette()})}),document.querySelectorAll(".hex-input").forEach((i)=>{i.addEventListener("input",(o)=>{let s=o.target.previousElementSibling;if(s&&s.type==="color"){let l=o.target.value.replace("#","").substring(0,6);if(l.length===6)s.value="#"+l,this.updatePreview(),this.generateAndApplyPalette()}})}),document.querySelectorAll('input[type="color"]').forEach((i)=>{i.addEventListener("input",(o)=>{let s=o.target.nextElementSibling;if(s&&s.classList.contains("hex-input")){let l=o.target.id.includes("disabled")&&o.target.id.includes("background")?"00":"FF";s.value=o.target.value+l,this.generateAndApplyPalette()}})}),this._domCache.resetBtn)this._domCache.resetBtn.addEventListener("click",()=>{this.resetToDefaults()})},generateAndApplyPalette(){let i=document.documentElement;Object.entries({contentDefault:"--custom-content-color-default",contentPressed:"--custom-content-color-pressed",contentDisabled:"--custom-content-color-disabled",backgroundDefault:"--custom-background-color-default",backgroundPressed:"--custom-background-color-pressed",backgroundDisabled:"--custom-background-color-disabled",borderDefault:"--custom-border-color-default",borderPressed:"--custom-border-color-pressed",borderDisabled:"--custom-border-color-disabled"}).forEach(([m,T])=>{let E=this._domCache.lightInputs[m];if(E?.nextElementSibling?.value)i.style.setProperty(T,E.nextElementSibling.value)});let s={contentDefault:"--custom-content-color-default",contentPressed:"--custom-content-color-pressed",contentDisabled:"--custom-content-color-disabled",backgroundDefault:"--custom-background-color-default",backgroundPressed:"--custom-background-color-pressed",backgroundDisabled:"--custom-background-color-disabled",borderDefault:"--custom-border-color-default",borderPressed:"--custom-border-color-pressed",borderDisabled:"--custom-border-color-disabled"},l="";if(Object.entries(s).forEach(([m,T])=>{let E=this._domCache.darkInputs[m];if(E?.nextElementSibling?.value)l+=`  ${T}: ${E.nextElementSibling.value};
`}),l)AppUtils.CSSInjector.inject("custom-dark-theme",`.dark {
${l}}`,"Dark 테마 커스텀 변수");this.applyToTestButtons(),setTimeout(()=>{if(window.ButtonSystem&&window.ButtonSystem.StyleManager)window.ButtonSystem.StyleManager.scheduleUpdate()},200)},applyToTestButtons(){let i=this.CUSTOM_PALETTE_NAME;this._domCache.testButtons.forEach((o)=>{let s=Array.from(o.classList),l=["button","pressed","toggle","dynamic"],m=s.find((T)=>!l.includes(T));if(m&&m!==i)o.classList.remove(m);if(!o.classList.contains(i))o.classList.add(i)})},resetToDefaults(){this._updateDynamicDOMCache();let i=document.documentElement.classList.contains("dark"),l=i?{contentDefault:["rgba(0, 0, 0, 1)","#000000FF"],contentPressed:["rgba(255, 239, 128, 1)","#FFEF80FF"],contentDisabled:["rgba(255, 225, 0, 1)","#FFE100FF"],backgroundDefault:["rgba(255, 225, 0, 1)","#FFE100FF"],backgroundPressed:["rgba(36, 31, 0, 1)","#241F00FF"],backgroundDisabled:["transparent","transparent"],borderDefault:["rgba(255, 225, 0, 1)","#FFE100FF"],borderPressed:["rgba(255, 239, 128, 1)","#FFEF80FF"],borderDisabled:["rgba(255, 225, 0, 1)","#FFE100FF"]}:{contentDefault:["rgba(255, 255, 255, 1)","#FFFFFFFF"],contentPressed:["rgba(140, 83, 44, 1)","#8C532CFF"],contentDisabled:["rgba(140, 83, 44, 1)","#8C532CFF"],backgroundDefault:["rgba(164, 105, 63, 1)","#A4693FFF"],backgroundPressed:["rgba(238, 220, 210, 1)","#EEDCD2FF"],backgroundDisabled:["transparent","transparent"],borderDefault:["rgba(164, 105, 63, 1)","#A4693FFF"],borderPressed:["rgba(140, 83, 44, 1)","#8C532CFF"],borderDisabled:["rgba(140, 83, 44, 1)","#8C532CFF"]},m=i?this._domCache.darkInputs:this._domCache.lightInputs,T=i?"dark":"light";if(Object.entries(l).forEach(([E,[n,t]])=>{let d=m[E];if(d){d.value=t;let f=`${T}-${E.replace(/([A-Z])/g,"-$1").toLowerCase()}`,_=document.querySelector(`[data-target="${f}"]`);if(_){let h=_.querySelector(".color-display"),L=_.querySelector(".panel-hex-input");if(h)h.style.background=t;if(L)L.value=t}this.CustomColorPicker.updateCSSVariable(f,t),d.dispatchEvent(new Event("input",{bubbles:!0}))}}),this.reset3DSpheresToDefaults(),this.generateAndApplyPalette(),typeof ButtonSystem<"u"&&ButtonSystem.StyleManager)ButtonSystem.StyleManager.scheduleUpdate();requestAnimationFrame(()=>{document.querySelectorAll(".button.custom").forEach((n)=>{n.offsetHeight;let t=n.querySelector(".background.dynamic");if(t)t.offsetHeight})})},reset3DSpheresToDefaults(){document.querySelectorAll(".color-canvas-3d").forEach((i,o)=>{let s=i.closest(".custom-color-picker");if(!s)return;let l=s.dataset.target,m=s.querySelector(".panel-hex-input");if(m&&m.value){let T=m.value.replace("#","").toUpperCase();if(T.length===8&&/^[0-9A-F]{8}$/.test(T)){let E=parseInt(T.substr(0,2),16),n=parseInt(T.substr(2,2),16),t=parseInt(T.substr(4,2),16),d=Mechanics.colorToCoordinate("#"+T.substr(0,6));if(d){let f=Mechanics.sphericalToCartesian(1,d.theta,d.phi),_=[0,0,1],h=[_[1]*f[2]-_[2]*f[1],_[2]*f[0]-_[0]*f[2],_[0]*f[1]-_[1]*f[0]],L=_[0]*f[0]+_[1]*f[1]+_[2]*f[2],M=Math.acos(Math.max(-1,Math.min(1,L))),O=Mechanics.normalize(h),u=Mechanics.fromAxisAngle(O,M);setTimeout(()=>{Mechanics.animateToQuaternion(Mechanics.UnifiedSphereState,u,i)},o*100)}}}}),Mechanics.UnifiedSphereState.Q=[1,0,0,0],Mechanics.UnifiedSphereState.selectedColor=Topology.COORDINATE_SYSTEM.POLAR_COLORS.NORTH_POLE}};console.log("\uD83D\uDCE6 [index.js] ES6 모듈 로딩 시작");var Li=performance.now(),Mi=performance.now();console.log(`✅ [index.js] 모든 모듈 import 완료 (${(Mi-Li).toFixed(2)}ms)`);console.log("\uD83D\uDCE4 [index.js] window 객체로 export 시작...");window.ColorConverter=X;window.Topology=N;window.Mechanics=V;window.AppUtils={SVGLoader:r,CSSInjector:v};window.ButtonSystem=p;window.ThemeManager=x;window.LargeTextManager=e;window.SizeControlManager=a;window.CustomPaletteManager=F;window.ColorSphereUI=S;window.BUTTON_CONSTANTS=B;console.log("✅ [index.js] 전역 export 완료");console.log("\uD83D\uDCE5 [index.js] Chroma.js 로드 시작...");var Oi=async()=>{return new Promise((s,l)=>{let m=document.createElement("script");m.src="https://cdn.jsdelivr.net/npm/chroma-js@2.4.2/chroma.min.js",console.log("\uD83C\uDF10 [index.js] CDN에서 로드 시도:","https://cdn.jsdelivr.net/npm/chroma-js@2.4.2/chroma.min.js"),m.onload=()=>{console.log("✅ [index.js] CDN에서 Chroma.js 로드 성공"),s("cdn")},m.onerror=()=>{console.warn("⚠️ [index.js] CDN 로드 실패, 로컬 파일 시도...");let T=document.createElement("script");T.src="./src/lib/chroma.min.js",console.log("\uD83D\uDCBE [index.js] 로컬 캐시에서 로드 시도:","./src/lib/chroma.min.js"),T.onload=()=>{console.log("✅ [index.js] 로컬 캐시에서 Chroma.js 로드 성공"),s("local")},T.onerror=()=>{console.error("❌ [index.js] 로컬 파일도 로드 실패"),l(Error("Chroma.js 로드 실패 (CDN & 로컬 모두 실패)"))},document.head.appendChild(T)},document.head.appendChild(m)})};Oi().then(async(i)=>{let o=performance.now();console.log(`✅ [index.js] Chroma.js 로드 완료 (${i.toUpperCase()}) (${o.toFixed(2)}ms)`),console.log("\uD83D\uDD0D [index.js] chroma 버전:",window.chroma?.version||"unknown"),console.log("\uD83D\uDCE5 [index.js] app.js 로드 시작...");let s=performance.now();try{await Promise.resolve().then(() => (di(),hi));let l=performance.now();console.log(`✅ [index.js] app.js 로드 완료 (${(l-s).toFixed(2)}ms)`),console.log("\uD83C\uDF89 [index.js] 전체 시스템 로드 완료")}catch(l){throw console.error("❌ [index.js] app.js 로드 실패:",l),l}}).catch((i)=>{console.error("❌ [index.js] Chroma.js 로드 실패:",i),alert("Chroma.js 라이브러리를 로드할 수 없습니다.")});

//# debugId=20D28334F4C07AD964756E2164756E21
