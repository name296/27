/* ==============================
  🎯 CSS 시스테매틱 모듈 구조
  ============================== */
@layer reset, design-system, layout, components, utilities;

/* ==============================
  🔄 CSS Reset & Base
  ============================== */
@layer reset {
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
  html { font-size: 1rem; line-height: 1.15; -webkit-text-size-adjust: 100%; @media (prefers-reduced-motion: no-preference) { scroll-behavior: smooth; } }
  button { all: unset; }
}

/* ==============================
  🎨 디자인 시스템 토큰
  ============================== */
@layer design-system {
  :root {
    /* === 🧮 기본 계산 단위 === */
    --base-unit: 1rem;
    --scale-xs: 0.25; --scale-sm: 0.5; --scale-md: 1; --scale-lg: 1.5; --scale-xl: 2; --scale-2xl: 3; --scale-3xl: 4;
    --unit-xs: calc(var(--base-unit) * var(--scale-xs)); --unit-sm: calc(var(--base-unit) * var(--scale-sm)); --unit-md: var(--base-unit); --unit-lg: calc(var(--base-unit) * var(--scale-lg)); --unit-xl: calc(var(--base-unit) * var(--scale-xl)); --unit-2xl: calc(var(--base-unit) * var(--scale-2xl)); --unit-3xl: calc(var(--base-unit) * var(--scale-3xl));
    
    /* === 🎯 타이포그래피 시스템 === */
    --font-family: 'Pretendard GOV', sans-serif;
    --font-size-base: 2.5rem; --font-size-scale: 1; --font-weight: 600; --line-height-label: 1;
    --font-size: calc(var(--font-size-base) * var(--font-size-scale)); --font-size-xl: calc(var(--font-size-base) * var(--font-size-scale) * 1.125); --font-size-lg: calc(var(--font-size-base) * var(--font-size-scale) * 0.72); --font-size-md: calc(var(--font-size-base) * var(--font-size-scale) * 0.52); --font-size-sm: calc(var(--font-size-base) * var(--font-size-scale) * 0.44); --font-size-xs: calc(var(--font-size-base) * var(--font-size-scale) * 0.36);
    --icon-size: var(--font-size);

    /* === 🎨 원시 색상 팔레트 === */
    --brown-50: #EEDCD2FF; --brown-100: #EB9B63FF; --brown-200: #C4895FFF; --brown-300: #A4693FFF; --brown-400: #8C532CFF; --brown-500: #4C3F37FF;
    --yellow-50: #FFEF80FF; --yellow-100: #FFE100FF; --yellow-200: #807000FF; --yellow-300: #241F00FF;
    --gray-0: #FFFFFFFF; --gray-50: #FAFAFAFF; --gray-100: #F2F2F2FF; --gray-200: #E8E8E8FF; --gray-300: #DBDBDBFF; --gray-400: #BFBFBFFF; --gray-500: #8C8C8CFF; --gray-600: #757575FF; --gray-700: #737373FF; --gray-800: #606060FF; --gray-850: #4C4C4CFF; --gray-900: #252525FF; --gray-950: #1F1F1FFF; --gray-1000: #000000FF;
    --system-pointed: #FF00E1FF; --system-error: #CC1D00FF; --system-warning: #FF4800FF; --system-success: #00A86BFF;

    /* === 🏠 페이지 UI 색상 (Light 테마) === */
    --page-bg-primary: var(--gray-50); --page-bg-secondary: var(--gray-0); --page-bg-tertiary: var(--gray-200); --page-text-primary: var(--gray-900); --page-text-secondary: var(--gray-800); --page-text-tertiary: var(--gray-500); --page-text-muted: var(--gray-400); --page-border-primary: var(--gray-300); --page-border-secondary: var(--gray-200); --page-accent-primary: var(--system-pointed); --page-accent-secondary: var(--brown-300);

    /* === 🎯 버튼 시스템 === */
    --button-width: 16rem; --button-height: 16rem;
    --z-index-button: 0; --z-index-background: -1; --z-index-icon-dynamic-pressed: 1;
    --border-style: solid; --border-style-pressed: solid; --border-style-disabled: dashed; --border-style-pointed: dashed;

    /* === 🎨 버튼 팔레트 (Light 테마) === */
    /* Primary1 */
    --primary1-background-color-default: var(--brown-300); --primary1-background-color-pressed: var(--brown-50); --primary1-background-color-disabled: #00000000; --primary1-background-color-pointed: var(--brown-300);
    --primary1-contents-color-default: var(--gray-0); --primary1-contents-color-pressed: var(--brown-200); --primary1-contents-color-disabled: var(--gray-500);
    --primary1-border-color-default: var(--brown-300); --primary1-border-color-pressed: var(--brown-300); --primary1-border-color-disabled: var(--gray-400); --primary1-border-color-pointed: var(--system-pointed);
    /* Primary2 */
    --primary2-background-color-default: var(--gray-0); --primary2-background-color-pressed: var(--brown-300); --primary2-background-color-disabled: var(--gray-200); --primary2-background-color-pointed: var(--gray-0);
    --primary2-contents-color-default: var(--gray-900); --primary2-contents-color-pressed: var(--gray-0); --primary2-contents-color-disabled: var(--gray-500);
    --primary2-border-color-default: var(--gray-500); --primary2-border-color-pressed: var(--brown-300); --primary2-border-color-disabled: var(--gray-400); --primary2-border-color-pointed: var(--system-pointed);
    /* Secondary1 */
    --secondary1-background-color-default: var(--gray-400); --secondary1-background-color-pressed: var(--gray-100); --secondary1-background-color-disabled: #00000000; --secondary1-background-color-pointed: var(--gray-400);
    --secondary1-contents-color-default: var(--gray-0); --secondary1-contents-color-pressed: var(--gray-900); --secondary1-contents-color-disabled: var(--gray-500);
    --secondary1-border-color-default: var(--gray-400); --secondary1-border-color-pressed: var(--gray-400); --secondary1-border-color-disabled: var(--gray-400); --secondary1-border-color-pointed: var(--system-pointed);
    /* Secondary2 */
    --secondary2-background-color-default: var(--gray-100); --secondary2-background-color-pressed: var(--gray-400); --secondary2-background-color-disabled: #00000000; --secondary2-background-color-pointed: var(--gray-100);
    --secondary2-contents-color-default: var(--gray-900); --secondary2-contents-color-pressed: var(--gray-0); --secondary2-contents-color-disabled: var(--gray-500);
    --secondary2-border-color-default: var(--gray-300); --secondary2-border-color-pressed: var(--gray-400); --secondary2-border-color-disabled: var(--gray-400); --secondary2-border-color-pointed: var(--system-pointed);
  }

  .dark {
    /* 페이지 UI 색상 */
    --page-bg-primary: var(--gray-950); --page-bg-secondary: var(--gray-900); --page-bg-tertiary: var(--gray-850); --page-text-primary: var(--gray-0); --page-text-secondary: var(--gray-400); --page-text-tertiary: var(--gray-500); --page-text-muted: var(--gray-800); --page-border-primary: var(--gray-850); --page-border-secondary: var(--gray-800);

    /* 버튼 팔레트 (Dark 테마) */
    /* Primary1 */
    --primary1-background-color-default: var(--yellow-300); --primary1-background-color-pressed: var(--yellow-100); --primary1-background-color-disabled: #00000000; --primary1-background-color-pointed: var(--yellow-300);
    --primary1-contents-color-default: var(--yellow-100); --primary1-contents-color-pressed: var(--yellow-200); --primary1-contents-color-disabled: var(--gray-500);
    --primary1-border-color-default: var(--yellow-100); --primary1-border-color-pressed: var(--yellow-100); --primary1-border-color-disabled: var(--gray-600); --primary1-border-color-pointed: var(--system-pointed);
    /* Primary2 */
    --primary2-background-color-default: var(--gray-1000); --primary2-background-color-pressed: var(--yellow-300); --primary2-background-color-disabled: var(--gray-800); --primary2-background-color-pointed: var(--gray-1000);
    --primary2-contents-color-default: var(--yellow-100); --primary2-contents-color-pressed: var(--yellow-100); --primary2-contents-color-disabled: var(--gray-500);
    --primary2-border-color-default: var(--gray-600); --primary2-border-color-pressed: var(--yellow-100); --primary2-border-color-disabled: var(--gray-600); --primary2-border-color-pointed: var(--system-pointed);
    /* Secondary1 */
    --secondary1-background-color-default: var(--gray-600); --secondary1-background-color-pressed: var(--gray-850); --secondary1-background-color-disabled: #00000000; --secondary1-background-color-pointed: var(--gray-600);
    --secondary1-contents-color-default: var(--gray-100); --secondary1-contents-color-pressed: var(--gray-100); --secondary1-contents-color-disabled: var(--gray-500);
    --secondary1-border-color-default: var(--gray-600); --secondary1-border-color-pressed: var(--gray-600); --secondary1-border-color-disabled: var(--gray-600); --secondary1-border-color-pointed: var(--system-pointed);
    /* Secondary2 */
    --secondary2-background-color-default: var(--gray-850); --secondary2-background-color-pressed: var(--gray-600); --secondary2-background-color-disabled: #00000000; --secondary2-background-color-pointed: var(--gray-850);
    --secondary2-contents-color-default: var(--gray-100); --secondary2-contents-color-pressed: var(--gray-100); --secondary2-contents-color-disabled: var(--gray-500);
    --secondary2-border-color-default: var(--gray-700); --secondary2-border-color-pressed: var(--gray-600); --secondary2-border-color-disabled: var(--gray-600); --secondary2-border-color-pointed: var(--system-pointed);
  }

  .large { --font-size-scale: 1.2; }
}

/* ==============================
  🏗️ 레이아웃 시스템
  ============================== */
@layer layout {
  body {
    display: flex; padding: 0; background: var(--page-bg-primary); color: var(--page-text-primary); font: 1em/1.4 var(--font-family); flex-flow: column nowrap; gap: 1rem;

    & header, & footer {
      display: flex; padding: var(--unit-lg); background: var(--page-bg-secondary); text-align: center; flex: 0 0 auto; flex-flow: column nowrap; gap: var(--unit-md);
    }

    & header { color: var(--page-text-primary); border-bottom: var(--unit-xs) solid var(--page-border-primary); }
    & footer { color: var(--page-text-tertiary); border-top: var(--unit-xs) solid var(--page-border-primary); font-size: var(--font-size-xs); & ul { padding: 0; list-style: none; } & li { display: inline-block; } & a { color: var(--page-text-secondary); text-decoration: none; &:hover { color: var(--page-text-primary); text-decoration: underline; } } }

    & main {
      display: flex; width: 100%; padding: 0 1rem; flex: 1; flex-flow: row nowrap; gap: 1rem;

      & aside { display: flex; width: 25rem; flex: 0 0 auto; flex-flow: column nowrap; gap: 1rem; }
      & contents { display: flex; width: 100%; padding: 0; flex: 1; flex-flow: column nowrap; justify-content: space-evenly; gap: 1rem; }
    }

    /* 타이포그래피 */
    & h1 { color: var(--page-text-primary); font: 700 var(--font-size-xl) var(--font-family); }
    & h2 { color: var(--page-text-primary); font: 600 var(--font-size-lg) var(--font-family); }
    & h3 { color: var(--page-text-primary); font: 600 var(--font-size-md)/1.6 var(--font-family); }
    & h4 { color: var(--page-text-primary); font: 600 var(--font-size-sm)/1.6 var(--font-family); text-align: left; }
    & p { color: var(--page-text-secondary); font: var(--font-size-md)/1.5 var(--font-family); }
    & kbd { background: var(--page-bg-tertiary); border: 0.125rem solid var(--page-border-secondary); color: var(--page-text-primary); font: 0.8em var(--font-family); }
    & strong { color: var(--page-text-primary); font: 600 1em var(--font-family); }
    & ul { padding: 0 0 0 1rem; & li { line-height: 1.6; } }
    }
  }

  /* ==============================
  🧩 컴포넌트 시스템
    ============================== */
@layer components {
  /* === 🎪 Showcase 컨테이너 === */
  .showcase {
    display: flex; background: var(--page-bg-secondary); border: var(--unit-xs) solid var(--page-border-primary); border-radius: calc(var(--unit-xs) * 3); flex-flow: column nowrap;

    &.sidebar { padding: var(--unit-sm); gap: var(--unit-xs); font: 0.85em/1.3 var(--font-family); text-align: center; }
    &.sidebar.guide { padding: var(--unit-xs); gap: calc(var(--unit-xs) / 2); font: 0.8em/1.2 var(--font-family); text-align: left; width: 100%; & h3 { text-align: center; } & h4 { text-align: left; } & ul { padding: 0 0 0 1.2rem; text-align: left; & li { text-align: left; line-height: 1.5; } } }
    &.content { padding: var(--unit-lg); gap: var(--unit-sm); }
    &.content.palette { flex-flow: row wrap; justify-content: center; align-items: center; gap: var(--unit-lg); }
    &.theme { flex-flow: row nowrap; justify-content: center; align-items: center; gap: var(--unit-md); }
    &.scale { flex-flow: column nowrap; gap: var(--unit-sm); }
  }

  /* === 🎮 인터랙티브 컨트롤 === */
  .scaling {
    display: flex; align-items: center; gap: var(--unit-xs);
    & label { padding: 0; color: var(--page-text-secondary); font: 500 0.9rem var(--font-family); min-width: 6rem; text-align: right; }
    & input[type="range"] { height: 0.375rem; border: none; outline: 0; background: var(--page-bg-tertiary); border-radius: 0.1875rem; flex: 1; cursor: pointer; &::-webkit-slider-thumb { width: 1rem; height: 1rem; appearance: none; background: var(--page-accent-primary); border: 2px solid var(--page-bg-primary); border-radius: 50%; box-shadow: 0 2px 4px #00000033; cursor: pointer; } &::-moz-range-thumb { width: 1rem; height: 1rem; background: var(--page-accent-primary); border: 2px solid var(--page-bg-primary); border-radius: 50%; box-shadow: 0 2px 4px #00000033; cursor: pointer; } &:focus { outline: 2px solid var(--system-pointed); outline-offset: 2px; } }
    &.reset { padding: var(--unit-xs) var(--unit-sm); background: var(--page-bg-tertiary); color: var(--page-text-primary); border: 1px solid var(--page-border-primary); border-radius: calc(var(--unit-xs) * 2); font: 500 0.85rem var(--font-family); cursor: pointer; transition: all 0.2s ease; &:hover { background: var(--page-bg-primary); border-color: var(--page-accent-primary); color: var(--page-accent-primary); } &:focus { outline: 2px solid var(--system-pointed); outline-offset: 2px; } }
  }

  .size.value { min-width: 4rem; font-size: 0.85rem; font-weight: 600; color: var(--page-accent-primary); text-align: center; }

  /* === 🎨 아이콘 시스템 === */
  .icon { display: flex; width: var(--icon-size); height: var(--icon-size); align-items: center; justify-content: center; & svg { display: block; width: 100%; height: 100%; fill: currentColor; } }

  /* === 🎯 버튼 컴포넌트 시스템 === */
  .button {
    position: relative; display: flex; box-sizing: border-box; width: var(--button-width); height: var(--button-height); justify-content: center; align-items: center; z-index: var(--z-index-button); cursor: pointer; will-change: transform; contain: layout style; color: var(--primary1-contents-color-default);

    & .background.dynamic {
      position: relative; display: flex; box-sizing: border-box; width: 100%; height: 100%; background: var(--primary1-background-color-default); outline: 0 var(--border-style) var(--primary1-border-color-default); flex-flow: column nowrap; justify-content: center; align-items: center; z-index: var(--z-index-background);

      & .icon.dynamic.pressed { position: absolute; display: none; z-index: var(--z-index-icon-dynamic-pressed); width: var(--icon-size); height: var(--icon-size); }
      & .label.dynamic { display: flex; width: fit-content; height: fit-content; font: var(--font-weight) var(--font-size)/var(--line-height-label) var(--font-family); align-items: center; justify-content: center; text-align: center; }
    }

    &:hover, &:focus-visible { outline: 0 var(--border-style-pointed) var(--system-pointed); }
  }

  /* === 🎨 커스텀 팔레트 생성기 UI === */
  .palette-input-group {
    display: flex; align-items: center; gap: var(--unit-xs); margin-bottom: var(--unit-xs);
    & label { min-width: 5rem; font-size: 0.75rem; font-weight: 600; color: var(--page-text-secondary); text-align: right; }
    & input[type="text"], & input[type="color"] { padding: calc(var(--unit-xs) / 2); border: 1px solid var(--page-border-primary); border-radius: calc(var(--unit-xs) / 2); font: 500 0.75rem var(--font-family); background: var(--page-bg-secondary); color: var(--page-text-primary); }
    & input[type="color"] { width: 2rem; height: 1.5rem; padding: 0; border: none; border-radius: calc(var(--unit-xs) / 2); cursor: pointer; }
    & .hex-input { flex: 1; font-family: 'Courier New', monospace; font-size: 0.7rem; }
  }

  .palette-colors-section { margin: var(--unit-sm) 0; & h4 { margin-bottom: var(--unit-xs); font-size: 0.8rem; color: var(--page-accent-primary); } }

  .palette-controls {
    display: flex; flex-direction: column; gap: calc(var(--unit-xs) / 2); margin: var(--unit-sm) 0;
    & button { padding: var(--unit-xs) var(--unit-sm); background: var(--page-bg-tertiary); border: 1px solid var(--page-border-primary); border-radius: calc(var(--unit-xs) / 2); font: 500 0.75rem var(--font-family); color: var(--page-text-primary); cursor: pointer; transition: all 0.2s ease; &:hover { background: var(--page-accent-primary); color: var(--page-bg-primary); border-color: var(--page-accent-primary); } &:focus { outline: 2px solid var(--system-pointed); outline-offset: 2px; } }
  }

  .palette-preview {
    margin: var(--unit-sm) 0;
    & h4 { margin-bottom: var(--unit-xs); font-size: 0.8rem; color: var(--page-text-secondary); }
    & .preview-colors { display: grid; grid-template-columns: 1fr 1fr; gap: calc(var(--unit-xs) / 2); & .color-preview { width: 100%; height: 1.5rem; border: 1px solid var(--page-border-primary); border-radius: calc(var(--unit-xs) / 2); cursor: help; } }
  }
}

/* ==============================
  🛠️ 유틸리티 클래스
  ============================== */
@layer utilities {
  /* 향후 유틸리티 클래스들이 필요할 때 추가 */
}